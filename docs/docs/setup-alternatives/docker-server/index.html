


<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="Jekyll v3.2.1">
  <link type="application/atom+xml" rel="alternate" href="https://codenvy.com/feed.xml" title="Codenvy Docs" />
  <link rel="alternate" type="application/atom+xml" title="Recent commits to Jekyll’s master branch" href="https://github.com/codenvy/codenvy/commits/master.atom">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
  <link rel="stylesheet" href="../../../assets/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
</head>


<body class="wrap">
  <header>
  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li class="">
    <a href="../../../docs/index.html">Home</a>
  </li>
  <li class="current">
    <a href="../../../docs/setup/intro/index.html">Docs</a>
  </li>
  <li class="">
    <a href="../../../tutorials/multi-machine/index.html">Tutorials</a>
  </li>
  <li class="">
    <a href="../../../artik/start-windows/index.html">Artik</a>
  </li>
  <li class="">
    <a href="../../../openshift/config/index.html">Openshift</a>
  </li>
  <li>
    <a href="https://github.com/eclipse/che/tree/master/docs/"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
        <a href="/">
          <span class="sr-only">Codenvy</span>
          <img src="../../../assets/imgs/logo-eclipseche.svg" alt="Codenvy Logo"  width="249" height="115">
        </a>
    </div>
    <nav class="main-nav unit two-thirds hide-on-mobiles">
      <ul>
  <li class="">
    <a href="../../../docs/index.html">Home</a>
  </li>
  <li class="current">
    <a href="../../../docs/setup/intro/index.html">Docs</a>
  </li>
  <li class="">
    <a href="../../../tutorials/multi-machine/index.html">Tutorials</a>
  </li>
  <li class="">
    <a href="../../../artik/start-windows/index.html">Artik</a>
  </li>
  <li class="">
    <a href="../../../openshift/config/index.html">Openshift</a>
  </li>
  <li>
    <a href="https://github.com/eclipse/che/tree/master/docs/"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

    </nav>
  </div>
</header>


    <section class="docs">
    <div class="grid">

      <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the docs…</option>
    
    
    
    <optgroup label="SETUP">
      



  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>


    </optgroup>
    
    <optgroup label="SETUP - ALTERNATIVES">
      



  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>


    </optgroup>
    
    <optgroup label="WORKSPACE ADMINISTRATION">
      



  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>


    </optgroup>
    
    <optgroup label="CHEDIR - PORTABLE WORKSPACES">
      



  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>


    </optgroup>
    
    <optgroup label="USE CHE AS AN IDE">
      



  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>


    </optgroup>
    
    <optgroup label="USE CHE AS A WORKSPACE SERVER">
      



  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>


    </optgroup>
    
    <optgroup label="WRITE CHE IDE PLUGINS">
      



  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>


    </optgroup>
    
    <optgroup label="CHE DATA MODEL">
      



  
  
  
  <option value=""></option>

  
  
  
  <option value=""></option>


    </optgroup>
    
  </select>
</div>


      <div class="unit four-fifths">
        <article>
          <div class="improve right hide-on-mobiles">
            <a href="https://github.com/eclipse/che/blob/master/docs/_docs/setup-alternatives/che-setupalt-docker-server.md"><i class="fa fa-pencil"></i> &nbsp;Improve this page</a>
          </div>
          <div class="doc-title">
            <h1>Usage&#58 Docker Server</h1>
            <div class="doc-title-border">
            </div>
          </div>
          <h4 id="requires-eclipse-che-500-m6">Requires Eclipse Che 5.0.0-M6+</h4>
<p>Starting in Eclipse Che M6 release, we altered the structure of the Che container. The launching syntax is simplified to consolidate data into a single folder and to use environment variables more. This syntax will not work with the eclipse/che-server:latest and you may have to use eclipse/che-server:nightly or eclipse/che-server:5.0.0-M6 or eclipse/che-server:5.0.0-latest to get the right version.</p>

<p>Eclipse Che has an <a href="https://hub.docker.com/r/codenvy/che-server/">image available within Docker Hub</a>. This image only runs the Che server and requires your Docker clients to have additional configuration that varies by operating system.</p>

<p>!!!NOTE:  This is a new syntax that is not available on Docker Hub yet. To get this new approach, you need to build a codenvy/che-server:nightly directly.  Please see this <a href="https://github.com/eclipse/che/pull/2786">pull request</a> for details on how to run it.</p>

<p>The preferred technique for running Eclipse Che is with our <a href="doc:usage-docker">Usage: Docker</a> launcher which simplifies the syntax and provides a consistent client that works on any operating system. There are quirks to running the Che server container on Windows and Mac, so the <code class="highlighter-rouge">che-launcher</code> is encouraged.</p>

<p>As of 5.0.0-M7, this syntax has changed. The che-server container provides an error message if you try to use it with the old syntax.</p>
<h1 id="run-the-image">Run the Image</h1>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Run the latest released version of Che</span>
<span class="c"># Replace &lt;path-for-data&gt; with any host folder</span>
<span class="c"># Che will place backup files there - configurable properties, workspaces, lib, storage</span>
docker run -p 8080:8080 <span class="se">\</span>
           --name che <span class="se">\</span>
           --rm <span class="se">\</span>
           -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
           -v &lt;path-for-data&gt;:/data <span class="se">\</span>
           eclipse/che-server:5.0.0-latest

<span class="c"># To run the nightly version of Che, replace codenvy/che with</span>
eclipse/che-server:nightly

<span class="c"># To run a specific tagged version of Che, replace codenvy/che with</span>
eclipse/che-server:&lt;version&gt;

<span class="c"># Stop the container running Che</span>
docker stop che

<span class="c"># Restart the container running Che and restart the Che server</span>
docker restart che

<span class="c"># Upgrade to a newer version</span>
docker pull eclipse/che-server:5.0.0-latest
docker restart che<span class="se">\</span>
</code></pre>
</div>
<p>Che has started when you see <code class="highlighter-rouge">Server startup in ##### ms</code>.  After starting, Che is available at <code class="highlighter-rouge">localhost:8080</code> or a remote IP if Che has been started remotely.  The examples on this page assume that I am running this container on a Windows machine and I would like my workspaces to be saved in <code class="highlighter-rouge">C:\tmp</code>.  Note that on Windows, volume mounts require Linux-formatted syntax, for which they are here.</p>

<h2 id="selinux">SELinux</h2>
<p>If you are on SELinux then run this instead:</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Run the latest released version of Che</span>
docker run -p 8080:8080 <span class="se">\</span>
           --name che <span class="se">\</span>
           -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
           -v /C/tmp:/data:Z <span class="se">\</span>
           eclipse/che-server:5.0.0-latest<span class="se">\</span>
</code></pre>
</div>
<h2 id="ports">Ports</h2>
<p>Tomcat inside the container will bind itself to port 8080 by default. You must map this port to be exposed in your container using <code class="highlighter-rouge">-p 8080:8080</code>.  If you want to change the port at which your browsers connect, then change the first value, such as <code class="highlighter-rouge">p 9000:8080</code>.  This will route requests from port 9000 to the internal Tomcat bound to port 8080.  If you want to change the internal port that Tomcat is bound, you must update the port binding and set <code class="highlighter-rouge">CHE_PORT</code> to the new value.</p>
<div class="language-text highlighter-rouge"><pre class="highlight"><code>docker run -p 9000:9500 \
           --name che \
           -e CHE_PORT=9500 \
           -v /var/run/docker.sock:/var/run/docker.sock \
           -v /C/tmp:/data \
           eclipse/che-server:5.0.0-latest\
</code></pre>
</div>
<h2 id="configuration">Configuration</h2>
<p>Most important configuration properties are defined as environment variables that you pass into the container. You can also optionally pass in a custom <code class="highlighter-rouge">che.properties</code> which has internal Che configuration that is loaded when Che’s tomcat is booted.  For example, to have Che listen on port 9000:</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code>docker run -p:9000:9000 <span class="se">\</span>
           --name che <span class="se">\</span>
           -e <span class="nv">CHE_SERVER_ACTION</span><span class="o">=</span>stop <span class="se">\</span>
           -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
           -v /C/tmp:/data <span class="se">\</span>
           eclipse/che-server:5.0.0-latest<span class="se">\</span>
</code></pre>
</div>
<p>There are many variables that can be set.</p>

<table>
  <thead>
    <tr>
      <th>Variable</th>
      <th>Description</th>
      <th>Defaults»»»»»&gt;</th>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">CHE_SERVER_ACTION</code></td>
      <td>The command to send to Tomcat. it can be [run</td>
      <td>start</td>
      <td>stop].</td>
      <td><code class="highlighter-rouge">run</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CHE_LOCAL_CONF_DIR</code></td>
      <td>Folder where a custom <code class="highlighter-rouge">che.properties</code> located. If not provided, then the container will copy the system <code class="highlighter-rouge">che.properties</code> into <code class="highlighter-rouge">/data/conf/che.properties</code>. You can reuse this or replace it  with configuration on a different folder using this variable. If you use this variable, you must also mount the same directory.</td>
      <td><code class="highlighter-rouge">/data/conf</code></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CHE_ASSEMBLY</code></td>
      <td>The path to a Che assembly that is on your host to be used instead of the assembly packaged within the <code class="highlighter-rouge">che-server</code> image. If you set this variable, you must also volume mount the same directory to <code class="highlighter-rouge">/home/user/che</code></td>
      <td><code class="highlighter-rouge">/home/user/che</code></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CHE_IN_VM</code></td>
      <td>Set to ‘true’ if this container is running inside of a VM providing Docker such as boot2docker, Docker for Mac, or Docker for Windows. We auto-detect this for most situations, but it’s not always perfect.</td>
      <td>auto-detection</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CHE_LOG_LEVEL</code></td>
      <td>Logging level of output for Che server. Can be <code class="highlighter-rouge">debug</code> or <code class="highlighter-rouge">info</code>.</td>
      <td><code class="highlighter-rouge">info</code></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CHE_IP</code></td>
      <td>IP address Che server will bind to. Used by browsers to contact workspaces. You must set this IP address if you want to bind the Che server to an external IP address that is not the same as Docker’s.</td>
      <td>The IP address set to the Docker host. This does cover 99% of situations, but on rare occassions we are not able to discover this IP address and you must provide it.</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CHE_DEBUG_SERVER</code></td>
      <td>If <code class="highlighter-rouge">true</code>, then will launch the Che server with JPDA activated so that you a Java debugger can attach to the Che server for debugging plugins, extensions, and core libraries.</td>
      <td><code class="highlighter-rouge">false</code></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CHE_DEBUG_SERVER_PORT</code></td>
      <td>The port that the JPDA debugger will listen.</td>
      <td><code class="highlighter-rouge">8000</code></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CHE_DEBUG_SERVER_SUSPEND</code></td>
      <td>If <code class="highlighter-rouge">true</code>, then activates <code class="highlighter-rouge">JPDA_SUSPEND</code> flag for Tomcat running the Che server. Used for advanced internal debugging of extensions.</td>
      <td><code class="highlighter-rouge">false</code></td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CHE_PORT</code></td>
      <td>The port the Che server will bind itself to within the Che container.</td>
      <td>‘8080`</td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="run-che-on-public-ip-address">Run Che on Public IP Address</h2>
<p>If you want to have remote browser clients connect to the Che server (as opposed to local browser clients) and override the defaults that we detect, set <code class="highlighter-rouge">CHE_IP</code> to the Docker host IP address that will have requests forwarded to the <code class="highlighter-rouge">che-server</code> container.</p>

<p>We run an auto-detection algorithm within the che-server container to determine this IP.  If Docker is running on <code class="highlighter-rouge">boot2docker</code> this is usually the <code class="highlighter-rouge">eth1</code> interface. If you are running Docker for Windows or Docker for Mac this is usually the <code class="highlighter-rouge">eth0</code> interface. If you are running Docker natively on Linux, this is the <code class="highlighter-rouge">docker0</code> interface. If your host that is running Docker has its IP at 10.0.75.4 and you wanted to allow remote clients access to this container then:</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code>docker run -p:8080:8080 <span class="se">\</span>
           --name che <span class="se">\</span>
           -e <span class="nv">CHE_IP</span><span class="o">=</span>10.0.75.4 <span class="se">\</span>
           -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
           -v /C/tmp:/data <span class="se">\</span>
           eclipse/che-server:5.0.0-latest<span class="se">\</span>
</code></pre>
</div>
<h2 id="run-che-as-a-daemon">Run Che as a Daemon</h2>
<p>Pass the <code class="highlighter-rouge">--restart always</code> parameter to the docker syntax to have the Docker daemon restart the container on any exit event, including when your host is initially booting. You can also run Che in the background with the <code class="highlighter-rouge">-d</code> option.</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code>docker run -p:8080:8080 <span class="se">\</span>
           --name che <span class="se">\</span>
           --restart always <span class="se">\</span>
           -e <span class="nv">CHE_IP</span><span class="o">=</span>10.0.75.4 <span class="se">\</span>
           -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
           -v /C/tmp:/data <span class="se">\</span>
           eclipse/che-server:5.0.0-latest<span class="se">\</span>
</code></pre>
</div>
<h2 id="override-che-internals">Override Che Internals</h2>
<p>Eclipse Che running in the container has its configuration in <code class="highlighter-rouge">/data/conf/che.properties</code>. This file is copied into the directory that you mount into <code class="highlighter-rouge">/data</code>. You can modify this file and restart Che if you want.</p>

<p>You can also start a shell session in the context of the running container. This will allow you to browse all directories and use your favorite text editor.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>sudo docker <span class="nb">exec</span> -it che /bin/bash

<span class="c"># You can also just edit /home/user/che/conf/che.properties`:</span>
sudo docker <span class="nb">exec</span> -it che vi /data/conf/che.properties

<span class="c"># After you finish making changes, restart the contain</span>
docker restart che<span class="se">\</span>
</code></pre>
</div>
<p>You can save your Che configuration to reside outside of the container to be reusable between different container instances. Create a local <code class="highlighter-rouge">che.properties</code> file, volume mount it into the container, and also tell Che in the container where to locate this file.</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Mount host directory with che.properties into container and inform Che where it is.</span>
<span class="c"># Place the folder with che.properties as a mount to /conf</span>
docker run -p:8080:8080 <span class="se">\</span>
           --name che <span class="se">\</span>
           --restart always <span class="se">\</span>
           -e <span class="nv">CHE_IP</span><span class="o">=</span>10.0.75.4 <span class="se">\</span>
           -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
           -v /C/tmp:/data <span class="se">\</span>

           -v /C/conf:/conf <span class="se">\</span>

           eclipse/che-server:5.0.0-latest<span class="se">\</span>
</code></pre>
</div>
<h2 id="use-local-che-assembly">Use Local Che Assembly</h2>
<p>You can run the Che image with a Che assembly that you have installed (or compiled) locally on your host. If you are developing a custom assembly, extension, or developing Che, you can mount your local binaries built on your host into the container by mounting the assembly to <code class="highlighter-rouge">/assembly</code>.</p>
<div class="language-text highlighter-rouge"><pre class="highlight"><code># If your local assembly is located at /home/my_assembly:
docker run -p:8080:8080 \
           --name che \
           --restart always \
           -v /var/run/docker.sock:/var/run/docker.sock \
           -v /C/tmp:/data \
           -v /C/conf:/conf \

					 -v /home/my_assembly:/assembly \

           eclipse/che-server:5.0.0-latest\
</code></pre>
</div>
<h2 id="port-exposure">Port Exposure</h2>
<p>Docker uses the ephemeral port range from <code class="highlighter-rouge">32768-65535</code>.  If you do not want to expose ports <code class="highlighter-rouge">32768-65535</code> because of the large port range, you need to reconfigure your Docker daemon to communicate over the <code class="highlighter-rouge">docker0</code> interface. You need to set  <code class="highlighter-rouge">DOCKER_MACHINE_HOST</code> to <code class="highlighter-rouge">172.17.0.1</code> and modify <code class="highlighter-rouge">machine.docker.che_api.endpoint</code> in the  <code class="highlighter-rouge">che.properties</code> file.</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="c"># Modify your local che.properties with:</span>
machine.docker.che_api.endpoint<span class="o">=</span>http://172.17.0.1:8080/wsmaster/api

<span class="c"># Run the Che container with:</span>
docker run -p:8080:8080 <span class="se">\</span>
           --name che <span class="se">\</span>
           --restart always <span class="se">\</span>
           -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
           -v /C/tmp:/data <span class="se">\</span>
           -v /C/conf:/conf <span class="se">\ </span>          
					 -v /home/my_assembly:/assembly <span class="se">\</span>

           -e <span class="nv">DOCKER_MACHINE_HOST</span><span class="o">=</span>172.17.0.1 <span class="se">\</span>

           eclipse/che-server:5.0.0-latest<span class="se">\</span>
</code></pre>
</div>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">che</span><span class="pi">:</span>
   <span class="s">image</span><span class="pi">:</span> <span class="s">eclipse/che-server:5.0.0-latest</span>
   <span class="s">port</span><span class="pi">:</span> <span class="s">8080:8080</span>
   <span class="s">restart</span><span class="pi">:</span> <span class="s">always</span>
   <span class="s">environment</span><span class="pi">:</span>
     <span class="s">CHE_LOCAL_CONF_DIR=/C/conf</span>
     <span class="s">CHE_ASSEMBLY=/home/my_assembly</span>
     <span class="s">DOCKER_MACHINE_HOST=172.17.0.1</span>
   <span class="s">volumes</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">/var/run/docker.sock:/var/run/docker.sock</span>
     <span class="pi">-</span> <span class="s">/C/tmp:/data</span>
     <span class="pi">-</span> <span class="s">/C/conf:/conf</span>
<span class="err">		</span> <span class="s">- /home/my_assembly:/assembly</span>
   <span class="s">container_name</span><span class="pi">:</span> <span class="s">che\</span>
</code></pre>
</div>
<p>Save this into a file named <code class="highlighter-rouge">Composefile</code>. Replace the <code class="highlighter-rouge">${IP}</code> with the IP address of the server where you are hosting Eclipse Che.  You can then run this with Docker Compose with <code class="highlighter-rouge">docker-compose -f Composefile -d</code>.</p>
<h1 id="docker-unix-socket-mounting-vs-tcp-mode">Docker Unix Socket Mounting vs TCP Mode</h1>
<p>The <code class="highlighter-rouge">-v /var/run/docker.sock:/var/run/docker.sock</code> syntax is for mounting a Unix socket so that when a process inside the container speaks to a Docker daemon, the process is redirected to the same socket on the host system.</p>

<p>However, peculiarities of file systems and permissions may make it impossible to invoke Docker processes from inside a container. If this happens, the Che startup scripts will print an error about not being able to reach the Docker daemon with guidance on how to resolve the issue.</p>

<p>An alternative solution is to run Docker daemon in TCP mode on the host and export <code class="highlighter-rouge">DOCKER_HOST</code> environment variable in the container.  You can tell the Docker daemon to listen on both Unix sockets and TCP.  On the host running the Docker daemon:</p>
<div class="language-text highlighter-rouge"><pre class="highlight"><code># Set this environment variable and restart the Docker daemon
DOCKER_OPTS=" -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock"

# Verify that the Docker API is responding at:
http://localhost:2375/containers/json
</code></pre>
</div>
<p>Having verified that your Docker daemon is listening, run the Che container with the with <code class="highlighter-rouge">DOCKER_HOST</code> environment variable set to the IP address of <code class="highlighter-rouge">docker0</code> or <code class="highlighter-rouge">eth0</code> network interface. If <code class="highlighter-rouge">docker0</code> is running on 1.1.1.1 then:</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code>docker run -p:8080:8080 <span class="se">\</span>
           --name che <span class="se">\</span>
           --restart always <span class="se">\</span>
           -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
           -v /C/tmp:/data <span class="se">\</span>
           -v /C/conf:/conf <span class="se">\ </span>          
					 -v /home/my_assembly:/assembly <span class="se">\</span>
           -e <span class="nv">DOCKER_MACHINE_HOST</span><span class="o">=</span>172.17.0.1 <span class="se">\</span>

           -e <span class="nv">DOCKER_HOST</span><span class="o">=</span>tcp://1.1.1.1:2375 <span class="se">\</span>

           eclipse/che-server:5.0.0-latest<span class="se">\</span>
</code></pre>
</div>

<h1 id="where-is-data-stored">Where Is Data Stored?</h1>
<p>The Che container uses host mounted volumes to store persistent data:</p>

<table>
  <thead>
    <tr>
      <th>Local Location</th>
      <th>Container Location</th>
      <th>Usage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">/var/run/docker.sock</code></td>
      <td><code class="highlighter-rouge">/var/run/docker.sock</code></td>
      <td>This is how Che gets access to Docker daemon. This instructs the container to use your local Docker daemon when Che wants to create its own containers.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/&lt;your-path&gt;/lib</code></td>
      <td><code class="highlighter-rouge">/data/lib</code></td>
      <td>Inside the container, we make a copy of important libraries that your workspaces will need and place them into <code class="highlighter-rouge">/lib</code>. When Che creates a workspace container, that container will be using your local Docker daemon and the Che workspace will look for these libraries in your local <code class="highlighter-rouge">/lib</code>. This is a tactic we use to get files from inside the container out onto your local host.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/&lt;your-path&gt;/workspaces</code></td>
      <td><code class="highlighter-rouge">/data/workspaces</code></td>
      <td>The location of your workspace and project files.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/&lt;your-path&gt;/storage</code></td>
      <td>/data/storage`</td>
      <td>The location where Che stores the meta information that describes the various workspaces, projects and user preferences.</td>
    </tr>
  </tbody>
</table>

<h1 id="debugging">Debugging</h1>
<p>Inside the Che container is a Tomcat service. The Tomcat debugger is running on port 8000. If you want to connect to that port, you need to bind it as part of the docker run command.</p>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code>docker run -p 8080:8080 <span class="se">\</span>
           -p 9000:8000 <span class="se">\</span>
           --name che <span class="se">\</span>
           --restart always <span class="se">\</span>
           -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
           -v /C/tmp/:/data <span class="se">\</span>
           eclipse/che-server:5.0.0-latest<span class="se">\</span>
</code></pre>
</div>

        </article>
      </div>

      <div class="unit one-fifth hide-on-mobiles">
  <aside>
    
    
    <h4>SETUP</h4>
    
    


<ul>

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/intro/index.html">Introduction</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/getting-started/index.html">Getting Started&#58 Local</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/getting-started-saas-cloud/index.html">Getting Started&#58 SaaS Cloud</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/bitnami/index.html">Getting Started&#58 Private Cloud</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/cli/index.html">Usage&#58 CLI</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/ssh/index.html">Usage&#58 SSH</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/desktop-ide-mounting/index.html">Usage&#58 Local IDE Sync</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/config/index.html">Configuration</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/config-proxies/index.html">Config&#58 Proxies</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/networking/index.html">Config&#58 Networking</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/config-docker/index.html">Config&#58 Docker</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/config-security/index.html">Config&#58 Security</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/scaling/index.html">Config&#58 Scaling</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup/glossary/index.html">Glossary</a></li>
  
  

</ul>

    
    
    
    
    <h4>SETUP - ALTERNATIVES</h4>
    
    


<ul>

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup-alternatives/docker/index.html">Usage&#58 Docker Launcher</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup-alternatives/native/index.html">Usage&#58 Native Server</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class="current"><a href="../../../docs/setup-alternatives/docker-server/index.html">Usage&#58 Docker Server</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/setup-alternatives/electron/index.html">Usage&#58 Electron Clients</a></li>
  
  

</ul>

    
    
    
    
    <h4>WORKSPACE ADMINISTRATION</h4>
    
    


<ul>

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/workspace/admin-intro/index.html">Workspaces</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/workspace/stacks/index.html">Runtime Stacks</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/workspace/recipes/index.html">Runtime Recipes</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/workspace/samples/index.html">Project Samples</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/workspace/machines/index.html">Runtime Machines</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/workspace/volume-mounts/index.html">Volume Mounts</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/workspace/agents/index.html">Workspace Agents</a></li>
  
  

</ul>

    
    
    
    
    <h4>CHEDIR - PORTABLE WORKSPACES</h4>
    
    


<ul>

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/chedir/getting-started/index.html">Getting Started</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/chedir/why/index.html">Why Chedir?</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/chedir/installation/index.html">Installation</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/chedir/project-setup/index.html">Project Setup</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/chedir/up-and-down/index.html">Up and Down</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/chedir/chefiles/index.html">Chefile</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/chedir/ssh/index.html">SSH</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/chedir/factories/index.html">Factories</a></li>
  
  

</ul>

    
    
    
    
    <h4>USE CHE AS AN IDE</h4>
    
    


<ul>

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/projects/index.html">Projects</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/import-a-project/index.html">Import</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/editor-settings/index.html">Editor</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/intellisense/index.html">Intellisense</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/commands/index.html">Commands</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/git-svn/index.html">Git and SVN</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/previews/index.html">Previews</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/build/index.html">Build</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/run/index.html">Run</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/sharing/index.html">Share</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/debug/index.html">Debug</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/ide/docker/index.html">Docker</a></li>
  
  

</ul>

    
    
    
    
    <h4>USE CHE AS A WORKSPACE SERVER</h4>
    
    


<ul>

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/server/api-projects/index.html">Projects</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/server/build-run/index.html">Editing Files</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/server/create-workspaces/index.html">Workspaces</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/server/events/index.html">Events</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/server/project-types/index.html">Project Types</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/server/rest-api/index.html">REST API</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/server/stack/index.html">Stacks</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/server/websocket-api/index.html">Websocket API</a></li>
  
  

</ul>

    
    
    
    
    <h4>WRITE CHE IDE PLUGINS</h4>
    
    


<ul>

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/introduction/index.html">Introduction</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/setup-che-workspace/index.html">IDE Setup</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/create-and-build-extensions/index.html">Building Extensions</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/assemblies/index.html">Assemblies</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/dependency-injection-basics/index.html">Dependency Injection</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/code-editors/index.html">Editors</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/project-types/index.html">Project Types</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/actions/index.html">Actions</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/serverworkspace-access/index.html">Services</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/parts/index.html">Parts</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/calling-workspace-apis/index.html">REST APIs</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/java-class-reference/index.html">Java Class Reference</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/che-properties/index.html">Properties</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/native-access-to-the-workspace/index.html">Workspace Access</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/embed-htmljs/index.html">Native HTML/JS</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/helloworld-extension/index.html">HelloWorld Extension</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/plugins/themes/index.html">Themes</a></li>
  
  

</ul>

    
    
    
    
    <h4>CHE DATA MODEL</h4>
    
    


<ul>

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/data-model/stack/index.html">Stack</a></li>
  
  

  
  
  
  
  
  
  
  
  
   
    <li class=""><a href="../../../docs/data-model/samples/index.html">Samples</a></li>
  
  

</ul>

    
    
    
    
  </aside>
</div>


      <div class="clear"></div>

    </div>
  </section>


=======

=======
  <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<span class=\"sr-only\">Permalink</span><i class=\"fa fa-link\"></i>";
    anchor.title = "Permalink";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>

  




</body>
</html>
