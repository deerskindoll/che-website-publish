<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content="installationopenshift,  openshift, installation, ocp, multi-user, multi user, keycloak, postgres, s2i, deployment">
<title>Multi-User&#58 Deploy to OpenShift | Eclipse Che Documentation</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-che.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="che" href="http://0.0.0.0:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Eclipse Che Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="release-6.0.0.html">Release Notes</a></li>
                
                
                
                <li><a href="https://github.com/eclipse/che" target="_blank">Source Code</a></li>
                
                
                
                <li><a href="https://www.eclipse.org/che/docs/5/che/docs" target="_blank">Docs 5.x</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Support<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/eclipse/che/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Akind%2Fbug" target="_blank">Known Bugs</a></li>
                        
                        
                        
                        <li><a href="https://github.com/eclipse/che/issues/new" target="_blank">File an Issue</a></li>
                        
                        
                        
                        <li><a href="https://stackoverflow.com/questions/tagged/eclipse-che" target="_blank">Che on StackOverflow</a></li>
                        
                        
                    </ul>
                </li>
                
                
                <!-- 
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:?subject= feedback&body=I have some feedback about the Multi-User&#58 Deploy to OpenShift page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>
 -->
		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Multi-User&amp;#58 Deploy to OpenShift">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle"> </li>
  
  
  
      
  
  <li>
      <a href="#">Overview</a>
      <ul>
          
          
          
          <li><a href="index.html">Introduction</a></li>
          
          
          
          
          
          
          <li><a href="quick-start.html">Getting Started</a></li>
          
          
          
          
          
          
          <li><a href="single-multi-user.html">Single and Multi-User Flavors</a></li>
          
          
          
          
          
          
          <li><a href="infra-support.html">Supported Infrastructures</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Che on Docker</a>
      <ul>
          
          
          
          <li><a href="docker-single-user.html">Docker - Single User</a></li>
          
          
          
          
          
          
          <li><a href="docker-multi-user.html">Docker - Multi User</a></li>
          
          
          
          
          
          
          <li><a href="docker-config.html">Docker - Configuration</a></li>
          
          
          
          
          
          
          <li><a href="docker-cli.html">Docker - CLI Reference</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Che on Kubernetes</a>
      <ul>
          
          
          
          <li><a href="kubernetes-single-user.html">Kubernetes - Single User</a></li>
          
          
          
          
          
          
          <li><a href="kubernetes-config.html">Kubernetes - Configuration</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Che on OpenShift</a>
      <ul>
          
          
          
          <li><a href="openshift-single-user.html">OpenShift - Single User</a></li>
          
          
          
          
          
          
          <li class="active"><a href="openshift-multi-user.html">OpenShift - Multi User</a></li>
          
          
          
          
          
          
          <li><a href="openshift-config.html">OpenShift - Configuration</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">User Management</a>
      <ul>
          
          
          
          <li><a href="user-management.html">Authentication and Authorization</a></li>
          
          
          
          
          
          
          <li><a href="authentication.html">Security Model</a></li>
          
          
          
          
          
          
          <li><a href="permissions.html">Permissions</a></li>
          
          
          
          
          
          
          <li><a href="organizations.html">Organizations in UD</a></li>
          
          
          
          
          
          
          <li><a href="resource-management.html">Resource Management</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">User Guides</a>
      <ul>
          
          
          
          <li><a href="creating-starting-workspaces.html">Creating and starting Workspaces</a></li>
          
          
          
          
          
          
          <li><a href="ide-projects.html">Projects</a></li>
          
          
          
          
          
          
          <li><a href="editor-code-assistance.html">Editor and Code-Assistance</a></li>
          
          
          
          
          
          
          <li><a href="dependency-management.html">Dependency Management</a></li>
          
          
          
          
          
          
          <li><a href="commands-ide-macro.html">Commands and IDE Macros</a></li>
          
          
          
          
          
          
          <li><a href="version-control.html">Version Control</a></li>
          
          
          
          
          
          
          <li><a href="debug.html">Debug</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Workspace Administration</a>
      <ul>
          
          
          
          <li><a href="what-are-workspaces.html">Workspace Overview</a></li>
          
          
          
          
          
          
          <li><a href="stacks.html">Stacks</a></li>
          
          
          
          
          
          
          <li><a href="recipes.html">Workspace - Recipes</a></li>
          
          
          
          
          
          
          <li><a href="servers.html">Workspace - Servers</a></li>
          
          
          
          
          
          
          <li><a href="installers.html">Workspace - Installers</a></li>
          
          
          
          
          
          
          <li><a href="volumes.html">Workspace - Volumes Mount</a></li>
          
          
          
          
          
          
          <li><a href="env-variables.html">Workspace - Environment Variables</a></li>
          
          
          
          
          
          
          <li><a href="projects.html">Workspace - Projects</a></li>
          
          
          
          
          
          
          <li><a href="workspaces-troubleshooting.html">Workspace - Troubleshooting</a></li>
          
          
          
          
          
          
          <li><a href="workspace-data-model.html">Workspace Data Model</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Portable Workspaces</a>
      <ul>
          
          
          
          <li><a href="chedir-getting-started.html">Chedir - Getting Started</a></li>
          
          
          
          
          
          
          <li><a href="why-chedir.html">Chedir - Why Chedir?</a></li>
          
          
          
          
          
          
          <li><a href="chedir-installation.html">Chedir - Installation</a></li>
          
          
          
          
          
          
          <li><a href="chedir-project-setup.html">Chedir - Project Setup</a></li>
          
          
          
          
          
          
          <li><a href="chedir-up-and-down.html">Chedir - Up and Down</a></li>
          
          
          
          
          
          
          <li><a href="chefile.html">Chedir - Chefile</a></li>
          
          
          
          
          
          
          <li><a href="chedir-ssh.html">Chedir - SSH</a></li>
          
          
          
          
          
          
          <li><a href="factories-getting-started.html">Factory - Getting Started</a></li>
          
          
          
          
          
          
          <li><a href="creating-factories.html">Factory - Creating</a></li>
          
          
          
          
          
          
          <li><a href="factories_json_reference.html">Factory - JSON Reference</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Developer Guides</a>
      <ul>
          
          
          
          <li><a href="framework-overview.html">Overview</a></li>
          
          
          
          
          
          
          <li><a href="rest-api.html">SDK - REST API</a></li>
          
          
          
          
          
          
          <li><a href="che-in-che-quickstart.html">SDK - Your First Plugin</a></li>
          
          
          
          
          
          
          <li><a href="build-reqs.html">SDK - Building Che</a></li>
          
          
          
          
          
          
          <li><a href="assemblies.html">SDK - Assemblies</a></li>
          
          
          
          
          
          
          <li><a href="ide-extensions-gwt.html">SDK - GWT IDE Extensions</a></li>
          
          
          
          
          
          
          <li><a href="ide-extensions-js.html">SDK - JavaScript IDE Extensions</a></li>
          
          
          
          
          
          
          <li><a href="server-side-extensions.html">SDK - Server Side Extensions</a></li>
          
          
          
          
          
          
          <li><a href="custom-installers.html">SDK - Installers</a></li>
          
          
          
          
          
          
          <li><a href="project-types.html">SDK - Project Types</a></li>
          
          
          
          
          
          
          <li><a href="language-servers.html">SDK - Language Support</a></li>
          
          
          
          
          
          
          <li><a href="parts.html">IDE UI&#58 Parts</a></li>
          
          
          
          
          
          
          <li><a href="actions.html">IDE UI&#58 Actions</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Dev Essentials</a>
      <ul>
          
          
          
          <li><a href="guice.html">Dependency Injection</a></li>
          
          
          
          
          
          
          <li><a href="dto.html">Transport&#58 DTO</a></li>
          
          
          
          
          
          
          <li><a href="json-rpc.html">Communication&#58 JSON-RPC</a></li>
          
          
          
          
          
          
          <li><a href="handling-projects-in-plugins.html">Handling Projects in Plugins</a></li>
          
          
          
          
          
          
          <li><a href="dao.html">Persistence, DAO</a></li>
          
          
          
          
          
          
          <li><a href="properties.html">Properties</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Infrastructure and SPI</a>
      <ul>
          
          
          
          <li><a href="spi_overview.html">Overview</a></li>
          
          
          
          
          
          
          <li><a href="spi-implementation.html">Implementation Notes</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>

            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Multi-User&#58 Deploy to OpenShift</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.
$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });
/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top
  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    


    <!-- 


     -->

  <h2 id="system-requirements">System Requirements</h2>

<p>Your OpenShift node should have at least 5GB RAM available - 3GB go to Che deployments and 2GB is reserved to run at least one workspace.</p>

<h2 id="deployment-diagram">Deployment diagram</h2>

<p>The deployment script creates 3 DeploymentConfigs for Che, Postgres and Keycloak, as well as PVCs, services and routes (Che and Keycloak only). Once deployments are completed, a special service pod is started to configure Keycloak with realm, client and a default user. Client is provided with the right redirectUris and webOrigins. This pod gets deployed only in case an out-of-the-box Keycloak is used.</p>

<figure><img class="docimage" src="images/diagrams/ocp_multi_user.png" alt="" /></figure>

<h2 id="using-existing-keycloak">Using Existing Keycloak</h2>

<p>To prevent deployment script from creating a deployment for Keycloak, set the following env before running <code class="highlighter-rouge">deploy-che.sh</code>:</p>

<p><code class="highlighter-rouge">CHE_DEDICATED_KEYCLOAK=false</code></p>

<p>You will also need a few additional envs, as well as proper realm and client configuration for Keycloak. See: <a href="openshift-config.html#multi-user-using-own-keycloak-and-psql">OpenShift configuration</a>.</p>

<p>If your Keycloak server has <code class="highlighter-rouge">http</code> endpoint and Che server is deployed with <code class="highlighter-rouge">https</code> route, Keycloak script won’t be injected into Che page, since browsers will block loading insecure content into a secure page.</p>

<h2 id="how-to-get-scripts">How to Get Scripts</h2>

<p>There are two ways to get deployment scripts: either clone Che or run a Docker image:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/eclipse/che
<span class="nb">cd </span>che/dockerfiles/init/modules/openshift/files/scripts
</code></pre></div></div>
<p>or</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-ti</span> <span class="nt">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class="nt">-v</span> <span class="k">${</span><span class="nv">LOCAL_PATH</span><span class="k">}</span>:/data eclipse/che init
<span class="nb">cd</span> <span class="k">${</span><span class="nv">LOCAL_PATH</span><span class="k">}</span>/instance/config/openshift/scripts
</code></pre></div></div>

<h2 id="minishift">MiniShift</h2>

<p>Make sure you have started MiniShift with <code class="highlighter-rouge">--memory=4096</code> or more.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">CHE_MULTIUSER</span><span class="o">=</span><span class="nb">true
export </span><span class="nv">WAIT_FOR_CHE</span><span class="o">=</span><span class="nb">true</span>
./deploy_che.sh
</code></pre></div></div>

<h2 id="openshift-container-platform">OpenShift Container platform</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">CHE_MULTIUSER</span><span class="o">=</span><span class="nb">true
export </span><span class="nv">OPENSHIFT_ENDPOINT</span><span class="o">=</span>&lt;OCP_ENDPOINT_URL&gt; <span class="c"># e.g. https://api.pro-us-east-1.openshift.com for OpenShift Online Pro</span>
<span class="nb">export </span><span class="nv">OPENSHIFT_TOKEN</span><span class="o">=</span>&lt;OCP_TOKEN&gt; <span class="c"># it depends on authentication scheme for your OCP cluster - it can also be OPENSHIFT_USERNAME and OPENSHIFT_PASSWORD instead</span>
<span class="nb">export </span><span class="nv">OPENSHIFT_ROUTING_SUFFIX</span><span class="o">=</span>&lt;ROUTING-SUFFIX&gt; <span class="c"># e.g. yourDomain.router.com or b9ad.pro-us-east-1.openshiftapps.com for OpenShift Online Pro East Region</span>
<span class="nb">export </span><span class="nv">ENABLE_SSL</span><span class="o">=</span><span class="nb">false</span> <span class="c"># true by default. Set to false if you have self signed certs</span>
<span class="nb">export </span><span class="nv">OPENSHIFT_FLAVOR</span><span class="o">=</span>ocp
<span class="nb">export </span><span class="nv">WAIT_FOR_CHE</span><span class="o">=</span><span class="nb">true</span>
./deploy_che.sh
</code></pre></div></div>

<p><strong>IMPORTANT!</strong></p>

<p>If you provide a <strong>token</strong> rather than username/password, Che will use this token in the deployment script to login in and create all <a href="#deployment-diagram">Che infrastructure objects</a>, as well as when creating workspace pods and associated objects. A token may expire due to expiration timeout policy or it can be invalidated when a new token is requested. In this case, Fabric8 client library that Che uses to communicate with OpenShift will fail to create an object with this bad token and fall back to using a service account instead. There are two options here:</p>

<ol>
  <li>Set identical values for <code class="highlighter-rouge">CHE_OPENSHIFT_PROJECT</code> and <code class="highlighter-rouge">CHE_INFRA_OPENSHIFT_PROJECT</code>. In this case Che server pod and workspace pods will be created in the same namespace, thus, <code class="highlighter-rouge">che</code> service account will have permissions to create objects in this namespace’s scope.</li>
  <li>If you are a cluster admin, you may grant privileges to <code class="highlighter-rouge">che</code> service account so that it can create objects outside its namespace:</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>oadm policy add-cluster-role-to-user self-provisioner system:serviceaccount:eclipse-che:che

<span class="c"># eclipse-che is the default namespace where Che server objects are created.</span>
<span class="c"># It can be overridden by `CHE_OPENSHIFT_PROJECT`</span>
</code></pre></div></div>

<h2 id="openshift-dedicated">OpenShift Dedicated</h2>

<p>Instructions to deploy Che to OSD are identical to those for <a href="#openshift-container-platform">OpenShift Container Platform</a></p>

<h2 id="openshift-online">OpenShift Online</h2>

<p>Below is a recommended way to deploy Eclipse Che multi-user flavor on OSO:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">CHE_MULTIUSER</span><span class="o">=</span><span class="nb">true
export </span><span class="nv">OPENSHIFT_ENDPOINT</span><span class="o">=</span>https://api.rh-us-east-1.openshift.com
<span class="nb">export </span><span class="nv">OPENSHIFT_TOKEN</span><span class="o">=</span>bLAa-4dWUaixiUieOeVdynAB1QDmaJzrazepHEF431c
<span class="nb">export </span><span class="nv">CHE_INFRA_KUBERNETES_OAUTH__TOKEN</span><span class="o">=</span><span class="s2">""</span>
<span class="nb">export </span><span class="nv">OPENSHIFT_ROUTING_SUFFIX</span><span class="o">=</span>6923.rh-us-east-1.openshiftapps.com
<span class="nb">export </span><span class="nv">OPENSHIFT_FLAVOR</span><span class="o">=</span>ocp
<span class="nb">export </span><span class="nv">IMAGE_PULL_POLICY</span><span class="o">=</span>Always
<span class="nb">export </span><span class="nv">CHE_OPENSHIFT_PROJECT</span><span class="o">=</span>eclipse-che
<span class="nb">export </span><span class="nv">CHE_INFRA_OPENSHIFT_PROJECT</span><span class="o">=</span>eclipse-che
<span class="nb">export </span><span class="nv">WAIT_FOR_CHE</span><span class="o">=</span><span class="nb">true

cd </span>che/dockerfiles/init/modules/openshift/files/scripts

<span class="nb">echo</span> <span class="s2">"CHE_INFRA_KUBERNETES_PVC_QUANTITY: </span><span class="se">\"</span><span class="s2">1Gi</span><span class="se">\"</span><span class="s2">"</span> <span class="o">&gt;&gt;</span> che-config

./deploy_che.sh
</code></pre></div></div>

<p>A few gotchas:</p>

<ul>
  <li><code class="highlighter-rouge">CHE_OPENSHIFT_PROJECT</code> may be already used by another namespace. In this case, set it to have some unique value</li>
  <li><code class="highlighter-rouge">CHE_INFRA_OPENSHIFT_PROJECT</code> should be the same as <code class="highlighter-rouge">CHE_OPENSHIFT_PROJECT</code> which means all workspace objects will be created in the same s=namespace with Che server.
This is a prerequisite to use service account rather than a token that may get expired or invalidated</li>
  <li>You need to obtain and export <code class="highlighter-rouge">OPENSHIFT_TOKEN</code>. Deployment script will use it to login to your OSO account and deploy Che</li>
  <li><code class="highlighter-rouge">CHE_INFRA_KUBERNETES_OAUTH__TOKEN</code> should have an empty value. This way, <code class="highlighter-rouge">che</code> service account will be used to create workspace objects</li>
  <li><code class="highlighter-rouge">CHE_INFRA_KUBERNETES_PVC_QUANTITY</code>: use reasonable minimal values for your OSO account in order not to exceed quotas</li>
</ul>

<h2 id="whats-next">What’s Next?</h2>

<p>Now that you have a running Che Multi-User instance, let’s <a href="user-management.html">create a user, setup GitHub oAuth and login</a>.</p>



    <div class="tags">
        
        <b>Tags: </b>
        
        
        
        <a href="tag_installation.html" class="btn btn-default navbar-btn cursorNorm" role="button">installation</a>
        
        
        
        <a href="tag_openshift.html" class="btn btn-default navbar-btn cursorNorm" role="button">openshift</a>
        
        
        
    </div>

<!-- 
 -->

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               03/09/18 <br /> Eclipse Che: Eclipse Public License - v 1.0. <br />
 Site last generated: Mar 9, 2018 <br />
<p><img src="images/che_logo.png" alt="Eclise Che"/></p>
                </div>
            </div>
</footer>




    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
