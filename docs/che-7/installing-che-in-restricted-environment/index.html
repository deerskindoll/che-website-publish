<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" air-gap, airgap, offline">
<title>Installing Che in restricted environment | Eclipse Che Documentation</title>
<link rel="stylesheet" href="/che/docs/css/syntax.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/che/docs/css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="/che/docs/css/customstyles.css">
<link rel="stylesheet" href="/che/docs/css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="/che/docs/css/theme-che.css">


    <link rel="stylesheet" href="/che/docs/css/coderay.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/che/docs/css/asciidoc.css" type="text/css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" crossorigin="anonymous"></script>
<script src="/che/docs/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js" crossorigin="anonymous"></script>
<script src="/che/docs/js/toc.js"></script>
<script src="/che/docs/js/customscripts.js"></script>

<link rel="shortcut icon" href="/che/docs/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="che" href="/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/che/docs/">&nbsp;<span class="projectTitle"> Eclipse Che Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://medium.com/eclipse-che-blog/" target="_blank">Blog</a></li>
                
                
                
                <li><a href="https://github.com/eclipse/che" target="_blank">Source Code</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Support<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/eclipse/che/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Akind%2Fbug" target="_blank">Known Bugs</a></li>
                        
                        
                        
                        <li><a href="https://github.com/eclipse/che/issues/new" target="_blank">File an Issue</a></li>
                        
                        
                        
                        <li><a href="https://stackoverflow.com/questions/tagged/eclipse-che" target="_blank">Che on StackOverflow</a></li>
                        
                        
                    </ul>
                </li>
                
                
                <!-- 
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:?subject= feedback&body=I have some feedback about the Installing Che in restricted environment page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>
 -->
		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/che/docs/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: "/che/docs/search.json",
                                searchResultTemplate: '<li><a href="{url}" title="Installing Che in restricted environment">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle"> </li>
  
  <div class="sidebarSubtitle">Overview</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/introduction-to-eclipse-che">Introduction to Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che quick-starts</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-quick-starts">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-the-chectl-management-tool">Installing the chectl management tool</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/running-che-locally">Running Che locally</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/deploying-che-on-kubernetes-on-aws">Che on Amazon Web Services</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-openshift-3-using-the-operator">Che on OpenShift 3</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-openshift-4-from-operatorhub">Che on OpenShift 4</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-google-cloud-platform">Che on Google Cloud Platform</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-eclipse-che-on-microsoft-azure">Che on Microsoft Azure</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/accessing-che-from-openshift-developer-perspective">Accessing Che from OpenShift Developer Perspective</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/hosted-che">Hosted Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che architecture</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-architecture">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/high-level-che-architecture">High-level Che architecture</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-workspace-controller">Che workspace controller</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-workspaces-architecture">Che workspaces architecture</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">End-user Guide</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/navigating-che-using-the-dashboard">Navigating Che: dashboard</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che-Theia IDE basics</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-theia-ide-basics">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/defining-custom-commands-for-che-theia">Defining custom commands for Che-Theia</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/version-control">Version Control</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-theia-troubleshooting">Che-Theia Troubleshooting</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Using developer workspaces</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/workspaces-overview">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-a-workspace-using-a-devfile">Configuring a workspace using a devfile</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/making-a-workspace-portable-using-a-devfile">Making a workspace portable using a devfile</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/converting-a-che-6-workspace-to-a-che-7-devfile">Converting a Che 6 Workspace to a Che 7 devfile</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-and-configuring-a-new-che-7-workspace">Creating and configuring a new Che 7 workspace</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/importing-a-kubernetes-application-into-a-che-workspace">Importing a Kubernetes application into a Che workspace</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/remotely-accessing-che-workspaces">Remotely accessing workspaces</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-a-workspace-from-code-sample">Creating a workspace from code sample</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-a-workspace-by-importing-source-code-of-a-project">Creating a workspace by importing source code of a project</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-workspace-exposure-strategies">Configuring workspace exposure strategies</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Customizing developer environments</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/customizing-developer-environments">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/what-is-a-che-theia-plug-in">What is a Che-Theia plug-in</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-alternative-ides-in-che">Using alternative IDEs in Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-a-visual-studio-code-extension-in-che">Using a VS Code extension in Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/adding-tools-to-che-after-creating-a-workspace">Adding tools to Che after creating a workspace</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Configuring OAuth authorization</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/configuring-oauth-authorization">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-github-oauth">Configuring GitHub OAuth</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-openshift-oauth">Configuring OpenShift OAuth</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Using artifact repositories in a restricted environment</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/using-artifact-repositories-in-a-restricted-environment">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-maven-artifact-repositories">Using Maven artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-gradle-artifact-repositories">Using Gradle artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-python-artifact-repositories">Using Python artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-go-artifact-repositories">Using Go artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-nuget-artifact-repositories">Using NuGet artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-npm-artifact-repositories">Using npm artifact repositories</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/troubleshooting-for-che-end-users">Troubleshooting for Che end users</a>
      
      <ul>
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Installation Guide</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/installing-che-in-restricted-environment">Installing Che in restricted environment</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/upgrading-che">Upgrading Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/advanced-configuration-options">Advanced configuration options</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/uninstalling-che">Uninstalling Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Administration Guide</div>
  
  
  <li>
      
      <a href="#" class="expandable">Customizing devfile and plug-in registries</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/customizing-the-devfile-and-plug-in-registries">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/building-and-running-a-custom-registry-image">Building and running a custom registry image</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/including-the-plug-in-binaries-in-the-registry-image">Including the plug-in binaries in the registry image</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/editing-a-devfile-and-plug-in-at-runtime">Editing a devfile and plug-in at runtime</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/configuring-system-variables">Configuring system variables</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Retrieving Che logs</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/retrieving-che-logs">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-kubernetes-events">Accessing Kubernetes events on OpenShift</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-che-server-logs">Viewing Che server logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-external-service-logs">Viewing external service logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-che-workspaces-logs">Viewing Che workspaces logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-plug-in-broker-logs">Viewing Plug-in broker logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/collecting-logs-using-chectl">Collecting logs using chectl</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/monitoring-che">Monitoring Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/tracing-che">Tracing Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Managing users</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/managing-users">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-authorization">Configuring authorization</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-organizations">Using organizations</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/removing-user-data">Removing user data</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Securing Che</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/securing-che">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/authenticating-users">Authenticating users</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/authorizing-users">Authorizing users</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Backup and disaster recovery</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/backup-and-disaster-recovery">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/external-database-setup">External database setup</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/persistent-volumes-backups">Persistent Volumes backups</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/calculating-che-resource-requirements">Calculating Che resource requirements</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/caching-images-for-faster-workspace-start">Caching images for faster workspace start</a>
      
      <ul>
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Contributor Guide</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/installing-che-in-tls-mode-with-self-signed-certificates">Installing Che in TLS mode with self-signed certificates</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/branding-che-theia">Branding Che-Theia</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/developing-che-theia-plug-ins">Developing Che-Theia plug-ins</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/testing-che-theia-plug-ins">Testing Che-Theia plug-ins</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/publishing-che-theia-plug-ins">Publishing Che-Theia plug-ins</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/adding-support-for-a-new-language">Adding support for a new language</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/adding-support-for-a-new-debugger">Adding support for a new debugger</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che extensibility reference</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-extensibility-reference">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-extension-points">Che extension points</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-theia-plug-in-api">Che-Theia plug-in API</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/debug-adapter-protocol">Debug Adapter Protocol</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/language-server-protocol">Language Server Protocol</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Extensions</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/eclipse-che4z">Eclipse Che4z</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">OpenShift Connector</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/openshift-connector-overview">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/features-of-openshift-connector">Features of OpenShift Connector</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-openshift-connector-in-eclipse-che">Installing OpenShift Connector in Eclipse Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/authenticating-with-openshift-connector-from-eclipse-che">Authenticating with OpenShift Connector from Eclipse Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-components-with-openshift-connector-in-eclipse-che">Creating Components with OpenShift Connector in Eclipse Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/connecting-source-code-from-github-to-a-openshift-component-using-openshift-connector">Connecting source code from GitHub to a OpenShift Component</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block: -->
<!--         <p class="external">
             <a href="#" id="collapseAll">Collapse all</a> | <a href="#" id="expandAll">Expand all</a>
         </p>-->
         
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>

            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Installing Che in restricted environment</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.
$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });
/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top
  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    


    <!-- 


     -->

  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The following sections describe the steps necessary to deploy Che in a Kubernetes or OpenShift cluster in a restricted environment (also called <em>offline mode</em> or <em>air-gap scenario</em>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, Eclipse Che workspaces reference various external resources, including container images available in public registries or sample projects hosted on GitHub.</p>
</div>
<div class="paragraph">
<p>To deploy Che in an environment where these external resources are not available (for example, on a cluster that is not exposed to the public Internet):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Build images containing external resources (workspace plug-ins, projects).</p>
</li>
<li>
<p>Pull all images needed for running Che to a registry that is accessible.</p>
</li>
<li>
<p>Configure Che to use these images.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="notes-on-network-connectivity-in-restricted-environments">Notes on network connectivity in restricted environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Restricted network environments range from a private subnetwork in a cloud provider to a separate network owned by a company, disconnected from the public Internet. Regardless of the network configuration, Che works <strong>provided that the Ingress and Routes that are created for Che components (che-server, keycloak, devfile-registry, plugin-registry) are accessible from inside the Kubernetes or OpenShift cluster.</strong></p>
</div>
<div class="paragraph">
<p>Consider the network topology of the environment to determine how best to accomplish this. For example, on a network owned by a company or an organization, the network administrators must ensure that traffic bound from the cluster can be routed to Ingress and Route host names. In other cases, for example, on AWS, create a proxy configuration allowing the traffic to leave the node to reach an external-facing Load Balancer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building-offline-versions-of-the-plug-in-and-devfile-registry_installing-che-in-restricted-environment">Building offline versions of the plug-in and devfile registry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to build <em>offline</em> registry images. For additional information, see <a href="/che/docs/che-7/building-and-running-a-custom-registry-image/">Building and running a custom registry image</a>.</p>
</div>
<div class="paragraph">
<p>The main purpose of building offline registry images is to ensure that workspaces can be started without relying on resources from the outside internet. For the plug-in registry, this means building a registry that serves all plug-in or extension artifacts in addition to plug-in metadata. Similarly, an offline devfile registry serves all sample projects referenced in devfiles as <code>zip</code> files.</p>
</div>
<div class="paragraph">
<p>Plug-in registry repositories contain scripts to make it easier to build custom images.</p>
</div>
<div class="sect2">
<h3 id="building-offline-plug-in-registry_installing-che-in-restricted-environment">Building offline plug-in registry</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clone the plug-in registry repository:</p>
<div class="listingblock">
<div class="content">
<pre>$ git clone https://github.com/eclipse/che-plugin-registry.git
$ cd che-plugin-registry</pre>
</div>
</div>
</li>
<li>
<p>Check out version of the registry to be deployed:</p>
<div class="listingblock">
<div class="content">
<pre>$ git checkout 7.3.0</pre>
</div>
</div>
</li>
<li>
<p>Build the plug-in registry image:</p>
<div class="listingblock">
<div class="content">
<pre>./build.sh --organization <em>&lt;my-org&gt;</em> \
           --registry <em>&lt;my-registry&gt;</em> \
           --tag <em>&lt;my-tag&gt;</em> \
           --offline</pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>--help</code> parameter to display full options for the <code>build.sh</code> script.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>This build of the registry builds a container image that contains all <code>.vsix</code> and <code>.theia</code> extensions that can be used in workspaces. This results in a large image. To build a version of the registry that contains only the <em>latest</em> version of each plug-in, use the <code>--latest-only</code> argument.</p>
</div>
</div>
<div class="sect2">
<h3 id="building-offline-devfile-registry_installing-che-in-restricted-environment">Building offline devfile registry</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clone the devfile registry repository:</p>
<div class="listingblock">
<div class="content">
<pre>$ git clone https://github.com/eclipse/che-devfile-registry.git
$ cd che-devfile-registry</pre>
</div>
</div>
</li>
<li>
<p>Check out version of the registry to be deployed:</p>
<div class="listingblock">
<div class="content">
<pre>$ git checkout 7.3.0</pre>
</div>
</div>
</li>
<li>
<p>Build the devfile registry image:</p>
<div class="listingblock">
<div class="content">
<pre>./build.sh --organization <em>&lt;my-org&gt;</em> \
           --registry <em>&lt;my-registry&gt;</em> \
           --tag <em>&lt;my-tag&gt;</em> \
           --offline</pre>
</div>
</div>
<div class="paragraph">
<p>Use the <code>--help</code> parameter to display full options for the <code>build.sh</code> script.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pulling-images-used-by-che-to-a-private-registry_installing-che-in-restricted-environment">Pulling images used by Che to a private registry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Che workspaces consist of pods running on a cluster, and therefore, many images are required to support all languages and plug-ins that can be used for a workspace. In an offline deployment, these images must be made available to the Che server running in the cluster.</p>
</div>
<div class="sect2">
<h3 id="essential-images">Essential images</h3>
<div class="paragraph">
<p>The images <em>essential</em> to starting a workspace are infrastructure images that are included in every workspace launch:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Images essential to starting workspaces</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docker.io/eclipse/che-server</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The main Che server image</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docker.io/eclipse/che-postgres</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The database used by Che</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docker.io/eclipse/che-keycloak</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keycloak Pod for user authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>quay.io/eclipse/che-jwtproxy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JWT proxy image for enabling authentication between services. See <a href="/che/docs/che-7/che-workspaces-architecture/#che-workspace-jwt-proxy_che-workspace-components">Che workspace JWT proxy</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>docker.io/eclipse/che-unified-plugin-broker</code><br>
  <code>docker.io/eclipse/che-init-plugin-broker</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Images for adding plug-ins to workspaces. See <a href="/che/docs/che-7/che-workspaces-architecture/#che-plug-in-broker_che-workspace-components">Che plug-ins broker</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>quay.io/eclipse/che-plugin-registry</code><br>
  <code>quay.io/eclipse/che-devfile-registry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plug-in and devfile registries that store metadata for workspaces. See <a href="#building-offline-versions-of-the-plug-in-and-devfile-registry_installing-che-in-restricted-environment">Building offline versions of the plug-in and devfile registry</a> for information about building appropriate images.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="workspace-specific-images">Workspace-specific images</h3>
<div class="paragraph">
<p>The images described in this section are required for running a workspace. Any one workspace uses a subset of the images below. It is only necessary to include the images that are used in workspaces created. For example, when using Che only for developing in Java, many images can be omitted.</p>
</div>
<div class="paragraph">
<p>To avoid issues when only a subset of the images described in this section is needed, remove unnecessary plug-ins and devfiles when building custom registries (see <a href="/che/docs/che-7/customizing-the-devfile-and-plug-in-registries/">Customizing devfile and plug-in registries</a> for more information).</p>
</div>
<div class="sect3">
<h4 id="plug-in-sidecar-images">Plug-in sidecar images</h4>
<div class="paragraph">
<p>Many workspace plug-ins are run in sidecar containers to ensure their dependencies are available. The offline plug-in registry (see <a href="#building-offline-plug-in-registry_installing-che-in-restricted-environment">Building offline plug-in registry</a>) includes a file with the list of all images referenced in its plug-ins.</p>
</div>
<div class="paragraph">
<p>To get a list of images required for plug-ins, display this file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ docker run -it --rm \
  --entrypoint cat <em>&lt;my-offline-registry&gt;</em> /var/www/html/v3/external_images.txt</pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, substitute <code>&lt;my-offline-registry&gt;</code> for the image name and tag of the custom plug-in registry.</p>
</div>
</div>
<div class="sect3">
<h4 id="devfile-base-images">Devfile base images</h4>
<div class="paragraph">
<p>Every Che workspace uses one or more <em>base</em> images, which contain the development dependencies for the projects being built. Because the sample devfiles included in the devfile registry refer to images suited for this purpose, it is necessary to pull these images to be able to use the samples.</p>
</div>
<div class="paragraph">
<p>An offline devfile registry (see <a href="#building-offline-devfile-registry_installing-che-in-restricted-environment">Building offline devfile registry</a>) contains a file with the list of all images referenced in its devfiles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ docker run -it --rm \
  --entrypoint cat <em>&lt;my-offline-registry&gt;</em> /var/www/html/devfiles/external_images.txt</pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, substitute <code>&lt;my-offline-registry&gt;</code> for the image name and tag of the custom devfile registry.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-che-to-run-in-restricted-environment">Configuring Che to run in restricted environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to configure Che and related containers to refer to images in a restricted environment instead of the default images in an online registry.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>All required images available in an image registry that is visible to the cluster where Che is to be deployed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>This procedure uses the following placeholders:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Placeholders used in examples</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my-internal-registry&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a host name of the container-image registry (which is accessible in the restricted environment, see <a href="#pulling-images-used-by-che-to-a-private-registry_installing-che-in-restricted-environment">Pulling images used by Che to a private registry</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my-organization&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">organization of the container-image registry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;my-offline-devfile-registry&gt;</code><br>
  <code>&lt;my-offline-plug-in-registry&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offline plug-in and devfile registries (see <a href="#building-offline-versions-of-the-plug-in-and-devfile-registry_installing-che-in-restricted-environment">Building offline versions of the plug-in and devfile registry</a>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;ver&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">release of Che that is being deployed</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>CheCluster</code> Custom Resource, which is managed by the Che Operator, includes fields to facilitate deploying an instance of Che in a restricted environment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#777"># [...]</span>
<span style="color:#606">spec</span>:
  <span style="color:#606">server</span>:
    <span style="color:#606">airGapContainerRegistryHostname</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'<em>&lt;my-internal-registry&gt;</em>'</span></span>
    <span style="color:#606">airGapContainerRegistryOrganization</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'<em>&lt;my-organization&gt;</em>'</span></span>
<span style="color:#777"># [...]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Setting these values uses <code>&lt;my-internal-registry&gt;</code> and <code>&lt;my-organization&gt;</code> for all images. This means that the Operator expects the offline plug-in and devfile registries to be available at:</p>
</div>
<div class="listingblock">
<div class="content">
<pre><em>&lt;my-internal-registry&gt;</em>/<em>&lt;my-organization&gt;</em>/che-plug-in-registry:<em>&lt;ver&gt;</em>
<em>&lt;my-internal-registry&gt;</em>/<em>&lt;my-organization&gt;</em>/che-devfile-registry:<em>&lt;ver&gt;</em></pre>
</div>
</div>
</div>
</div>

    <div class="tags">
        
    </div>

<!-- 
 -->

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
                    Eclipse Che - Documentation <br/>
                    Site last generated: Apr 9, 2020 <br/>
                    <hr>
                    <a href="http://www.eclipse.org" target="_blank">Eclipse Foundation</a><br/>
                    <a href="http://www.eclipse.org/legal/privacy.php" target="_blank">Privacy Policy</a><br/>
                    <a href="http://www.eclipse.org/legal/termsofuse.php" target="_blank">Terms of Use</a><br/>
                    <a href="https://www.eclipse.org/legal/epl-2.0/" target="_blank">Eclipse Public License</a><br/>
                    <a href="http://www.eclipse.org/legal" target="_blank">Legal Resources</a><br/>
                </div>
            </div>
</footer>




    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
