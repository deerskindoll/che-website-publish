<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=",  ">
<title>Installing Che on-premise with Kubespray | Eclipse Che Documentation</title>
<link rel="stylesheet" href="/che/docs/css/syntax.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/che/docs/css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="/che/docs/css/customstyles.css">
<link rel="stylesheet" href="/che/docs/css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="/che/docs/css/theme-che.css">


    <link rel="stylesheet" href="/che/docs/css/coderay.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/che/docs/css/asciidoc.css" type="text/css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" crossorigin="anonymous"></script>
<script src="/che/docs/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js" crossorigin="anonymous"></script>
<script src="/che/docs/js/toc.js"></script>
<script src="/che/docs/js/customscripts.js"></script>

<link rel="shortcut icon" href="/che/docs/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="che" href="/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/che/docs/">&nbsp;<span class="projectTitle"> Eclipse Che Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://medium.com/eclipse-che-blog/" target="_blank">Blog</a></li>
                
                
                
                <li><a href="https://github.com/eclipse/che" target="_blank">Source Code</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Support<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/eclipse/che/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Akind%2Fbug" target="_blank">Known Bugs</a></li>
                        
                        
                        
                        <li><a href="https://github.com/eclipse/che/issues/new" target="_blank">File an Issue</a></li>
                        
                        
                        
                        <li><a href="https://stackoverflow.com/questions/tagged/eclipse-che" target="_blank">Che on StackOverflow</a></li>
                        
                        
                    </ul>
                </li>
                
                
                <!-- 
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:?subject= feedback&body=I have some feedback about the Installing Che on-premise with Kubespray page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>
 -->
		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/che/docs/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: "/che/docs/search.json",
                                searchResultTemplate: '<li><a href="{url}" title="Installing Che on-premise with Kubespray">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle"> </li>
  
  <div class="sidebarSubtitle">Overview</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/introduction-to-eclipse-che">Introduction to Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/che-glossary">Che glossary</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che quick-starts</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-quick-starts">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-the-chectl-management-tool">Installing the chectl management tool</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/running-che-locally">Running Che locally</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/deploying-che-on-kubernetes-on-aws">Che on Amazon Web Services</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-openshift-3-using-the-operator">Che on OpenShift 3</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-openshift-4-from-operatorhub">Che on OpenShift 4</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-google-cloud-platform">Che on Google Cloud Platform</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-eclipse-che-on-microsoft-azure">Che on Microsoft Azure</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/accessing-che-from-openshift-developer-perspective">Accessing Che from OpenShift Developer Perspective</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/hosted-che">Hosted Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che architecture</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-architecture">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/high-level-che-architecture">High-level Che architecture</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-workspace-controller">Che workspace controller</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-workspaces-architecture">Che workspaces architecture</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">End-user Guide</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/navigating-che-using-the-dashboard">Navigating Che: dashboard</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che-Theia IDE basics</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-theia-ide-basics">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/defining-custom-commands-for-che-theia">Defining custom commands for Che-Theia</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/version-control">Version Control</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-theia-troubleshooting">Che-Theia Troubleshooting</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Using developer workspaces</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/workspaces-overview">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-a-workspace-using-a-devfile">Configuring a workspace using a devfile</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/making-a-workspace-portable-using-a-devfile">Making a workspace portable using a devfile</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/converting-a-che-6-workspace-to-a-che-7-devfile">Converting a Che 6 Workspace to a Che 7 devfile</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-and-configuring-a-new-che-7-workspace">Creating and configuring a new Che 7 workspace</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/importing-a-kubernetes-application-into-a-che-workspace">Importing a Kubernetes application into a Che workspace</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/remotely-accessing-che-workspaces">Remotely accessing workspaces</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-a-workspace-from-code-sample">Creating a workspace from code sample</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-a-workspace-by-importing-source-code-of-a-project">Creating a workspace by importing source code of a project</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-workspace-exposure-strategies">Configuring workspace exposure strategies</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Customizing developer environments</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/customizing-developer-environments">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/what-is-a-che-theia-plug-in">What is a Che-Theia plug-in</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-alternative-ides-in-che">Using alternative IDEs in Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-a-visual-studio-code-extension-in-che">Using a VS Code extension in Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/adding-tools-to-che-after-creating-a-workspace">Adding tools to Che after creating a workspace</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Configuring OAuth authorization</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/configuring-oauth-authorization">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-github-oauth">Configuring GitHub OAuth</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-openshift-oauth">Configuring OpenShift OAuth</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Using artifact repositories in a restricted environment</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/using-artifact-repositories-in-a-restricted-environment">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-maven-artifact-repositories">Using Maven artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-gradle-artifact-repositories">Using Gradle artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-python-artifact-repositories">Using Python artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-go-artifact-repositories">Using Go artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-nuget-artifact-repositories">Using NuGet artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-npm-artifact-repositories">Using npm artifact repositories</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/troubleshooting-for-che-end-users">Troubleshooting for Che end users</a>
      
      <ul>
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Installation Guide</div>
  
  
  <li>
      
      <a href="#" class="expandable">Configuring Che</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/configuring-che-overview">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-the-che-installation">Configuring the Che installation</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/advanced-configuration-options-for-the-che-server-component">Advanced configuration options for Che server</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-namespace-strategies">Configuring namespace strategies</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/deploying-che-with-support-for-git-repositories-with-self-signed-certificates">Deploying Che with support for Git repositories with self-signed certificates</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-using-storage-classes">Installing Che using storage classes</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/adding-custom-certificates-to-trust-store">Adding custom public SSL certificates to Che trust-store</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/installing-che-in-restricted-environment">Installing Che in restricted environment</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/upgrading-che">Upgrading Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/advanced-configuration-options">Advanced configuration options</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/uninstalling-che">Uninstalling Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Administration Guide</div>
  
  
  <li>
      
      <a href="#" class="expandable">Customizing devfile and plug-in registries</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/customizing-the-devfile-and-plug-in-registries">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/building-and-running-a-custom-registry-image">Building and running a custom registry image</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/including-the-plug-in-binaries-in-the-registry-image">Including the plug-in binaries in the registry image</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/editing-a-devfile-and-plug-in-at-runtime">Editing a devfile and plug-in at runtime</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/configuring-system-variables">Configuring system variables</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Retrieving Che logs</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/retrieving-che-logs">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-kubernetes-events">Accessing Kubernetes events on OpenShift</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-che-server-logs">Viewing Che server logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-external-service-logs">Viewing external service logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-che-workspaces-logs">Viewing Che workspaces logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-plug-in-broker-logs">Viewing Plug-in broker logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/collecting-logs-using-chectl">Collecting logs using chectl</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/monitoring-che">Monitoring Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/tracing-che">Tracing Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Managing users</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/managing-users">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-authorization">Configuring authorization</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-organizations">Using organizations</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/removing-user-data">Removing user data</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Securing Che</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/securing-che">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/authenticating-users">Authenticating users</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/authorizing-users">Authorizing users</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Backup and disaster recovery</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/backup-and-disaster-recovery">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/external-database-setup">External database setup</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/persistent-volumes-backups">Persistent Volumes backups</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/calculating-che-resource-requirements">Calculating Che resource requirements</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/caching-images-for-faster-workspace-start">Caching images for faster workspace start</a>
      
      <ul>
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Contributor Guide</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/installing-che-in-tls-mode-with-self-signed-certificates">Installing Che in TLS mode with self-signed certificates</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/branding-che-theia">Branding Che-Theia</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/developing-che-theia-plug-ins">Developing Che-Theia plug-ins</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/testing-che-theia-plug-ins">Testing Che-Theia plug-ins</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/publishing-che-theia-plug-ins">Publishing Che-Theia plug-ins</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/adding-support-for-a-new-language">Adding support for a new language</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/adding-support-for-a-new-debugger">Adding support for a new debugger</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che extensibility reference</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-extensibility-reference">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-extension-points">Che extension points</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-theia-plug-in-api">Che-Theia plug-in API</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/debug-adapter-protocol">Debug Adapter Protocol</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/language-server-protocol">Language Server Protocol</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Extensions</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/eclipse-che4z">Eclipse Che4z</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">OpenShift Connector</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/openshift-connector-overview">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/features-of-openshift-connector">Features of OpenShift Connector</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-openshift-connector-in-eclipse-che">Installing OpenShift Connector in Eclipse Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/authenticating-with-openshift-connector-from-eclipse-che">Authenticating with OpenShift Connector from Eclipse Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-components-with-openshift-connector-in-eclipse-che">Creating Components with OpenShift Connector in Eclipse Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/connecting-source-code-from-github-to-a-openshift-component-using-openshift-connector">Connecting source code from GitHub to a OpenShift Component</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block: -->
<!--         <p class="external">
             <a href="#" id="collapseAll">Collapse all</a> | <a href="#" id="expandAll">Expand all</a>
         </p>-->
         
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>

            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Installing Che on-premise with Kubespray</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.
$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });
/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top
  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    


    <!-- 


     -->

  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This article explains how to create a single or multi-node bare metal Kubernetes cluster to deploy Che.</p>
</div>
<div class="paragraph">
<p>A bare metal cluster has multiple advantages (performance, density, etc.) but also drawbacks (longer to reset, etc.). An other type of installation is inside Virtual Machines for example.</p>
</div>
<div class="paragraph">
<p>There are a lot of ways to deploy a bare metal cluster, we will use Kubespray in this article for its simplicity.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration">Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hardware:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CPU: 2 preferable (no check performed by Kubespray)</p>
</li>
<li>
<p>RAM: 1024MB/1500MB minimum for worker/master nodes enforced in Kubespray (configurable)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Eclipse Che requires minimum CPU and RAM to run itself and to spawn user environments</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Software:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>O/S: <a href="https://github.com/kubernetes-sigs/kubespray#supported-linux-distributions">check the supported distributions</a></p>
</li>
<li>
<p>Kubespray: 2.12.5</p>
</li>
<li>
<p>Python: 3.7</p>
</li>
<li>
<p>Helm: 3.1.2</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-kubespray-to-set-up-kubernetes_installing-che-on-premise-with-kubespray">Set up Kubernetes using Kubespray</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Commands are given for bash on Ubuntu.</p>
</div>
<div class="paragraph">
<div class="title">System update</div>
<p>Start with a system update before installing new packages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ sudo apt-get update
$ sudo apt-get upgrade</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This step is only required on the machine used to run Kubespray. Kubespray will take care of system updates on the cluster nodes.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">SSH access</div>
<ul>
<li>
<p>Install SSH server</p>
<div class="paragraph">
<p>If a node does not have SSH server installed by default, you have to install it to remotely control this machine.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ sudo apt-get install openssh-server</pre>
</div>
</div>
</li>
<li>
<p>Create SSH key pair</p>
<div class="paragraph">
<p>You have to generate one or multiple SSH key pair(s) to allow Kubespray/Ansible automatic login using SSH. You can use a different key pair for each node or use the same for all nodes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ssh-keygen -b 2048 -t rsa -f /home/&lt;local-user&gt;/.ssh/id_rsa -q -N ""</pre>
</div>
</div>
</li>
<li>
<p>Copy your public key(s) on nodes</p>
<div class="paragraph">
<p>Copy your public key(s) in the ~/.ssh/authorized_keys file of the user accounts you will use on each node for deployment.
You will be prompted twice for the password corresponding to account, the first time for the public key upload using SSH and the second time for adding the public key in the authorized_keys file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>for ip in &lt;node1-ip&gt; &lt;node2-ip&gt; ...; do
   scp /home/&lt;local-user&gt;/.ssh/id_rsa.pub &lt;node-user&gt;@$ip:/home/&lt;node-user&gt;/.ssh
   ssh &lt;node-user&gt;@$ip "cat ~/.ssh/id_rsa.pub &gt; ~/.ssh/authorized_keys"
done</pre>
</div>
</div>
<div class="paragraph">
<p>You will never be prompted again for password using SSH, the key will be used to authenticate you!</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">IPv4 forwarding</div>
<p>Kubespray requires to turn on IPv4 forwarding. This should be done automatically by Kubepsray.</p>
</div>
<div class="paragraph">
<p>To do it manually, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>for ip in &lt;node1-ip&gt; &lt;node2-ip&gt; ...; do
   ssh &lt;node-user&gt;@$ip "echo 1 | sudo tee /proc/sys/net/ipv4/ip_forward"
done</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Turn off swap</div>
<p>Turning swap off is required by Kubernetes. See this issue for more information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>for ip in &lt;node1-ip&gt; &lt;node2-ip&gt; ...; do
   ssh &lt;node-user&gt;@$ip "sudo swapoff -a &amp;&amp; sudo sed -i '/ swap / s/^/#/' /etc/fstab"
done</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Get Kubespray</div>
<p>Start by installing curl.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo apt-get install curl</pre>
</div>
</div>
<div class="paragraph">
<p>Get the lastest Kubespray source code from its repo.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The latest release when writing this tutorial, v2.12.5, throws error not encountered in the master version.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>mkdir -p ~/projects/ &amp;&amp; \
curl -LJO https://github.com/kubernetes-sigs/kubespray/archive/master.zip &amp;&amp; \
unzip kubespray-master.zip -d kubespray &amp;&amp; \
rm kubespray-master.zip &amp;&amp; \
cd kubespray</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Install Kubespray requirements</div>
<p>Kubespray uses Python 3 and several dependencies to be installed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install Python 3</p>
<div class="paragraph">
<p>Install Python 3 but also pip (package installer for Python) and venv to create virtual environnements (see below).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo apt-get install python3.7 python3-pip python3-venv</pre>
</div>
</div>
</li>
<li>
<p>Create a virtual env</p>
<div class="paragraph">
<p>This is a best isolation pratice using Python to use virtual env (or conda env for conda users).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>python3 -m venv ~/projects/kubespray-venv
source ~/projects/kubespray-venv/bin/activate</pre>
</div>
</div>
</li>
<li>
<p>Install Kubespray dependencies</p>
<div class="listingblock">
<div class="content">
<pre>pip install -r requirements.txt</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Create a new cluster configuration</div>
<p>Start creating a copy of the default settings from sample cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cp -rfp inventory/sample inventory/mycluster</pre>
</div>
</div>
<div class="paragraph">
<p>Be sure you are still in the ~/projects/kubespray/ directory before executing this command!</p>
</div>
<div class="paragraph">
<p>Then customize your new cluster</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Update Ansible inventory file with inventory builder</p>
<div class="listingblock">
<div class="content">
<pre>declare -a IPS=(&lt;node1-ip&gt; &lt;node2-ip&gt; ...)
CONFIG_FILE=inventory/mycluster/hosts.yaml python contrib/inventory_builder/inventory.py ${IPS[@]}</pre>
</div>
</div>
</li>
<li>
<p>(optional) Rename your nodes or deactivate hostname renaming</p>
<div class="paragraph">
<p>If you skip this step, your cluster hostnames will be renamed node1, node2, etc.</p>
</div>
<div class="paragraph">
<p>You can either edit the file ~/projects/kubespray/inventory/mycluster/hosts.yaml</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sed -e 's/node1/tower/g' -e 's/node2/laptop/g' ... -i inventory/mycluster/hosts.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>OR</p>
</div>
<div class="paragraph">
<p>keep the current hostnames</p>
</div>
<div class="listingblock">
<div class="content">
<pre>echo "override_system_hostname: false" &gt;&gt;  inventory/mycluster/group_vars/all/all.yml</pre>
</div>
</div>
</li>
<li>
<p>Check localhost vs nodes usernames</p>
<div class="paragraph">
<p>If your localhost username differ from a node username (the one that owns your SSH public key), you must specify it to Ansible by editing (manually) the hosts.yaml file.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">localhost username</th>
<th class="tableblock halign-center valign-middle">node1 username</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">foo</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">bar</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre>&gt; cat inventory/mycluster/hosts.yaml
all:
  hosts:
    node1:
      ansible_ssh_user: bar</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Deploy your cluster!</div>
<p>It&#8217;s time to deploy Kubernetes by running the Ansible playbook command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ansible-playbook -i inventory/mycluster/hosts.yaml  --become --become-user=root cluster.yml</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Access your cluster API</div>
<p>The cluster is created but you currently have no access to its API for configuration purpose.
<code>kubectl</code> has been installed by Kubespray on master nodes of your cluster and configuration files are saved in root home directories of master nodes.</p>
</div>
<div class="paragraph">
<p>If you want to access the cluster API from another computer on your network, install kubectl first.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl
chmod +x ./kubectl
sudo mv ./kubectl /usr/local/bin/kubectl</pre>
</div>
</div>
<div class="paragraph">
<p>Then copy the configuration files from the root home directory of a master node:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On the master node, copy configurations files from root to your useraccount</p>
<div class="listingblock">
<div class="content">
<pre>ssh &lt;node-user&gt;@&lt;master-node-ip&gt; "sudo cp -R /root/.kube ~ &amp;&amp; sudo chown -R &lt;node-user&gt;:&lt;node-user&gt; ~/.kube"</pre>
</div>
</div>
</li>
<li>
<p>Then download the configuration files to a remote computer</p>
<div class="listingblock">
<div class="content">
<pre>scp -r &lt;node-user&gt;@&lt;master-node-ip&gt;:~/.kube ~
sudo chown -R &lt;local-user&gt;:&lt;local-user&gt; ~/.kube</pre>
</div>
</div>
</li>
<li>
<p>Keep secrets protected on the master node</p>
<div class="listingblock">
<div class="content">
<pre>ssh &lt;node-user&gt;@&lt;master-node-ip&gt; "rm -r ~/.kube"</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For sanity, use autocompletion!</p>
</div>
<div class="listingblock">
<div class="content">
<pre>echo 'source &lt;(kubectl completion bash)' &gt;&gt;~/.bashrc</pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>title: Installing a load balancer on a bare metal cluster
keywords:
tags: []
sidebar: che_7_docs
permalink: che-7/installing-load-balancer-on-a-bare-metal-cluster/
folder: che-7/overview
summary:
---</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-a-load-balancer-on-bare-metal-cluster_installing-che-on-premise-with-kubespray">Installing a load balancer on a bare metal cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On a bare metal Kubernetes cluster, you don&#8217;t have a load balancer already running since it&#8217;s usually part of your cloud provider infrastructure.</p>
</div>
<div class="paragraph">
<p>For more details, refer to the official Kubernetes <a href="https://kubernetes.io/docs/concepts/services-networking/service/"><code>Service</code> documentation</a>.</p>
</div>
<div class="paragraph">
<p>Fortunately, MetalLB is a open-source implementation of a load balancer for bare metal deployments!</p>
</div>
<div class="paragraph">
<div class="title">Install MetalLB</div>
<p>Follow the official installation guide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl edit configmap -n kube-system kube-proxy</pre>
</div>
</div>
<div class="paragraph">
<p>and set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apiVersion: kubeproxy.config.k8s.io/v1alpha1
kind: KubeProxyConfiguration
mode: "ipvs"
ipvs:
  strictARP: true</pre>
</div>
</div>
<div class="paragraph">
<p>Then apply the manifests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.9.3/manifests/namespace.yaml
kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.9.3/manifests/metallb.yaml
# On first install only
kubectl create secret generic -n metallb-system memberlist --from-literal=secretkey="$(openssl rand -base64 128)"</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Set MetalLB configuration</div>
<p>To allow the load balancer to distribute external IPs, you must specify in its configuration what is the IP chunk allocated for it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cat &lt;&lt; EOF | kubectl apply -f -
apiVersion: v1
kind: ConfigMap
metadata:
  namespace: metallb-system
  name: config
data:
  config: |
    address-pools:
    - name: default
      protocol: layer2
      addresses:
      - &lt;your-ip-range&gt;
EOF</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Don&#8217;t forget to set &lt;your-ip-range&gt; to the ip chunk you want to use!</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>That&#8217;s it!</p>
</div>
<hr>
<div class="paragraph">
<p>title: Installing a storage on a bare metal cluster
keywords:
tags: []
sidebar: che_7_docs
permalink: che-7/installing-storage-on-a-bare-metal-cluster/
folder: che-7/overview
summary:
---</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-a-storage-on-bare-metal-cluster_installing-che-on-premise-with-kubespray">Installing a storage on a bare metal cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Deployments usually require storage in order to persist data since pods are designed to be ephemerals.</p>
</div>
<div class="paragraph">
<p>Kubernetes introduced several concepts around this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Persistant Volume <code>PV</code>: a declaration of an available volume</p>
</li>
<li>
<p>Persistant Volume Claim <code>PVC</code>: a claim for Persistent Volume</p>
</li>
<li>
<p>etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more details, please refer to the official Kubernetes documentation about storage that covers <code>volumes</code>, <code>PV</code>, <code>PVC</code>, provisioning and much more.</p>
</div>
<div class="paragraph">
<p>In this article, you will use a <code>nfs</code> volume type for its simplicity, accessiblity between nodes and capability to be dynamically provisioned.</p>
</div>
<div class="paragraph">
<div class="title">Set up the NFS server</div>
<p>Based on the Vitux tutorial.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install NFS server</p>
<div class="paragraph">
<p>Just pick a machine on the same network as your cluster nodes (it can be one of them), and run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo apt-get install -y nfs-kernel-server</pre>
</div>
</div>
</li>
<li>
<p>Choose export directory</p>
<div class="paragraph">
<p>Choose or create a directory and share it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo mkdir -p /mnt/my-nfs</pre>
</div>
</div>
<div class="paragraph">
<p>As we want all clients to have access, change its permissions</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo chown nobody:nogroup /mnt/my-nfs
sudo chmod 777 /mnt/my-nfs</pre>
</div>
</div>
</li>
<li>
<p>Do the NFS export</p>
<div class="listingblock">
<div class="content">
<pre>echo "&lt;mount-path&gt; &lt;subnet&gt;(rw,sync,no_subtree_check)" | sudo tee /etc/exports
sudo exportfs -a
sudo systemctl restart nfs-kernel-server</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You have to replace &lt;subnet&gt; and &lt;mount-path&gt; with your <code>nfs</code> settings</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Define the StorageClass and the provisioner</div>
<p>Based on the Yolanda tutorial.
We will use an <a href="https://github.com/kubernetes-incubator/external-storage">external-storage</a> template.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set authorizations</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f https://raw.githubusercontent.com/kubernetes-incubator/external-storage/master/nfs-client/deploy/rbac.yaml</pre>
</div>
</div>
</li>
<li>
<p>Set StorageClass</p>
<div class="listingblock">
<div class="content">
<pre>cat &lt;&lt; EOF | kubectl apply -f -
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: managed-nfs-storage
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"
provisioner: nfs-provisioner
parameters:
  archiveOnDelete: "false"
EOF</pre>
</div>
</div>
<div class="paragraph">
<p>We declare the <code>StorageClass</code> as default one to automatically be selected by `PVC`s.</p>
</div>
</li>
<li>
<p>Set provisioner</p>
<div class="listingblock">
<div class="content">
<pre>cat &lt;&lt; EOF | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nfs-client-provisioner
  labels:
    app: nfs-client-provisioner
  # replace with namespace where provisioner is deployed
  namespace: default
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: nfs-client-provisioner
  template:
    metadata:
      labels:
        app: nfs-client-provisioner
    spec:
      serviceAccountName: nfs-client-provisioner
      containers:
        - name: nfs-client-provisioner
          image: quay.io/external_storage/nfs-client-provisioner:latest
          volumeMounts:
            - name: nfs-client-root
              mountPath: /persistentvolumes
          env:
            - name: PROVISIONER_NAME
              value: nfs-provisioner
            - name: NFS_SERVER
              value: &lt;nfs-server-ip&gt;
            - name: NFS_PATH
              value: &lt;mount-path&gt;
      volumes:
        - name: nfs-client-root
          nfs:
            server: &lt;nfs-server-ip&gt;
            path: &lt;mount-path&gt;
EOF</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Don&#8217;t forget to replace &lt;nfs-server-ip&gt; and &lt;mount-path&gt; with your custom <code>nfs</code> settings</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Check everything is OK</div>
<div class="content">
<pre>kubectl get deployments.apps,pods,sc -n default</pre>
</div>
</div>
<div class="paragraph">
<p>You should see the <code>Deployment</code> of the provisioner, the corresponding <code>Pod</code> and also the <code>StorageClass</code> as default one.</p>
</div>
<hr>
<div class="paragraph">
<p>title: Installing chectl
keywords:
tags: []
sidebar: che_7_docs
permalink: che-7/installing-chectl/
folder: che-7/overview
summary:
---</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-chectl_installing-che-on-premise-with-kubespray">Installing chectl</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>chectl</code> is the Eclipse Che command-line management tool. It is used for operations on the Che server (start, stop, update, delete) and on workspaces (list, start, stop, inject) and to generate devfiles.</p>
</div>
<div class="sect2">
<h3 id="installing-the-chectl-management-tool-on-windows_installing-chectl">Installing the chectl management tool on Windows</h3>
<div class="paragraph">
<p>This section describes how to install the <code>chectl</code> management tool on Windows.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the following command in the PowerShell terminal:</p>
<div class="listingblock">
<div class="content">
<pre>C:\Users&gt; Set-ExecutionPolicy Bypass -Scope Process -Force; iex ((New-Object System.Net.WebClient).DownloadString('https://www.eclipse.org/che/chectl/win/'))</pre>
</div>
</div>
<div class="paragraph">
<p>The chectl binary file is installed at <code>C:\ProgramData\chectl</code>.</p>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="#upgrading-the-chectl-management-tool_installing-chectl">Upgrading the <code>chectl</code> management tool</a></p>
</li>
<li>
<p><a href="https://github.com/che-incubator/chectl/blob/master/README.md"><code>chectl</code> README</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="installing-the-chectl-management-tool-on-linux-or-macos_installing-chectl">Installing the chectl management tool on Linux or macOS</h3>
<div class="paragraph">
<p>This section describes how to install the <code>chectl</code> management tool on Linux or macOS.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The directory <code>/usr/local/bin</code> is in the user <code>$PATH</code>.</p>
</li>
<li>
<p>The <code>sudo</code> command is configured for the current user.</p>
</li>
<li>
<p>Remove all old or undesired versions of <code>chectl</code>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Run the following command in the terminal (this downloads and executes the <code>install.sh</code> script):</p>
<div class="listingblock">
<div class="content">
<pre>$ bash &lt;(curl -sL  https://www.eclipse.org/che/chectl/)</pre>
</div>
</div>
</li>
<li>
<p>Run the following command to verify that the <code>chectl</code> binary file used is <code>/usr/local/bin/chectl</code>:</p>
<div class="listingblock">
<div class="content">
<pre>$ which chectl
/usr/local/bin/chectl</pre>
</div>
</div>
</li>
<li>
<p>Run the following command to verify that the version of chectl that is the expected one.</p>
<div class="listingblock">
<div class="content">
<pre>$ chectl --version</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To identify the latest stable release, see the <a href="https://github.com/che-incubator/chectl/releases">list of chectl releases</a> and search for a release not containing "next" in the name.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Read the installation logs.</p>
<div class="listingblock">
<div class="content">
<pre>$ cat chectl-install.log</pre>
</div>
</div>
</li>
</ol>
</div>
<h4 id="additional-resources" class="discrete">Additional resources</h4>
<div class="ulist">
<ul>
<li>
<p><a href="#upgrading-the-chectl-management-tool_installing-chectl">Upgrading the <code>chectl</code> management tool</a></p>
</li>
<li>
<p><a href="https://github.com/che-incubator/chectl/blob/master/README.md"><code>chectl</code> README</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Related information</div>
<ul>
<li>
<p><a href="https://github.com/che-incubator/chectl/blob/master/README.md"><code>chectl</code> README</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-che-on-kubespray-using-chectl_installing-che-on-premise-with-kubespray">Installing che on Kubespray using chectl</h2>
<div class="sectionbody">
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A running Kubernetes cluster set up with Kubespray on bare metal. See <a href="#using-kubespray-to-set-up-kubernetes_installing-che-on-premise-with-kubespray">Set up Kubernetes using Kubespray</a>.</p>
</li>
<li>
<p>A load balancer is running on your cluster. See <a href="/che/docs/che-7/installing-load-balancer-on-a-bare-metal-cluster">this article</a>.</p>
</li>
<li>
<p>A storage is defined with a provisioner. See <a href="/che/docs/che-7/installing-storage-on-a-bare-metal-cluster">this article</a>.</p>
</li>
<li>
<p><code>chectl</code> management tool is installed. See <a href="/che/docs/che-7/installing-chectl">this article</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Deploy an ingress controller</p>
<div class="paragraph">
<p>We will use nginx for that, get the <em>cloud</em> deployment since you have configured a load balancer!</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/static/provider/cloud/deploy.yaml</pre>
</div>
</div>
</li>
<li>
<p>Get the IP attributed by the load balancer</p>
<div class="listingblock">
<div class="content">
<pre>$ kubectl get svc -n ingress-nginx</pre>
</div>
</div>
<div class="paragraph">
<p>It corresponds to the <code>EXTERNAL-IP</code> of the <code>ingress-nginx-controller</code> service. We will refer it as &lt;ip-from-load-balancer&gt;.</p>
</div>
</li>
<li>
<p>Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>$ chectl server:start --platform k8s --domain &lt;ip-from-load-balancer&gt;.nip.io --self-signed-cert</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Unless you provide a certificate, don&#8217;t forget the <em>self-signed-cert</em> flag</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
</div>

    <div class="tags">
        
        <b>Tags: </b>
        
        
        
    </div>

<!-- 
 -->

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
                    Eclipse Che - Documentation <br/>
                    Site last generated: May 20, 2020 <br/>
                    <hr>
                    <a href="http://www.eclipse.org" target="_blank">Eclipse Foundation</a><br/>
                    <a href="http://www.eclipse.org/legal/privacy.php" target="_blank">Privacy Policy</a><br/>
                    <a href="http://www.eclipse.org/legal/termsofuse.php" target="_blank">Terms of Use</a><br/>
                    <a href="https://www.eclipse.org/legal/epl-2.0/" target="_blank">Eclipse Public License</a><br/>
                    <a href="http://www.eclipse.org/legal" target="_blank">Legal Resources</a><br/>
                </div>
            </div>
</footer>




    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
