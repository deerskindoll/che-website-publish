<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=",  ">
<title>Using developer environments - workspaces | Eclipse Che Documentation</title>
<link rel="stylesheet" href="/che/docs/css/syntax.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/che/docs/css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="/che/docs/css/customstyles.css">
<link rel="stylesheet" href="/che/docs/css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="/che/docs/css/theme-che.css">


    <link rel="stylesheet" href="/che/docs/css/coderay.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/che/docs/css/asciidoc.css" type="text/css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" crossorigin="anonymous"></script>
<script src="/che/docs/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js" crossorigin="anonymous"></script>
<script src="/che/docs/js/toc.js"></script>
<script src="/che/docs/js/customscripts.js"></script>

<link rel="shortcut icon" href="/che/docs/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="che" href="/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Eclipse Che Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://medium.com/eclipse-che-blog/" target="_blank">Blog</a></li>
                
                
                
                <li><a href="https://github.com/eclipse/che" target="_blank">Source Code</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Che Version<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/che/docs/che-6/index.html">Che 6</a></li>
                        
                        
                        
                        <li><a href="/che/docs/che-7/index.html">Che 7 Beta</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Support<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/eclipse/che/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Akind%2Fbug" target="_blank">Known Bugs</a></li>
                        
                        
                        
                        <li><a href="https://github.com/eclipse/che/issues/new" target="_blank">File an Issue</a></li>
                        
                        
                        
                        <li><a href="https://stackoverflow.com/questions/tagged/eclipse-che" target="_blank">Che on StackOverflow</a></li>
                        
                        
                    </ul>
                </li>
                
                
                <!-- 
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:?subject= feedback&body=I have some feedback about the Using developer environments - workspaces page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>
 -->
		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/che/docs/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: "/che/docs/search.json",
                                searchResultTemplate: '<li><a href="{url}" title="Using developer environments - workspaces">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">Eclipse Che 7</li>
  
  
  
  <li>
      <a href="#">Overview</a>
      <ul>
          
          
          
          <li><a href="introduction-to-eclipse-che.html">Introduction to Che</a></li>
          
          
          
          
          
          
          <li><a href="che-quick-starts.html">Che quick-starts</a></li>
          
          
          
          
          
          
          <li><a href="hosted-che.html">Hosted Che</a></li>
          
          
          
          
          
          
          <li><a href="che-architecture.html">Che architecture</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">End-user Guide</a>
      <ul>
          
          
          
          <li><a href="che-theia-ide-basics.html">Che-Theia IDE basics</a></li>
          
          
          
          
          
          
          <li><a href="using-developer-environments-workspaces.html">Using developer workspaces</a></li>
          
          
          
          
          
          
          <li><a href="extending-che.html">Customizing developer environments</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Administration Guide</a>
      <ul>
          
          
          
          <li><a href="monitoring-che.html">Monitoring Che</a></li>
          
          
          
          
          
          
          <li><a href="tracing-che.html">Tracing Che</a></li>
          
          
          
          
          
          
          <li><a href="securing-che.html">Securing Che</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Contributor Guide</a>
      <ul>
          
          
          
          <li><a href="developing-che-theia-plug-ins.html">Developing Che-Theia plug-ins</a></li>
          
          
          
          
          
          
          <li><a href="testing-che-theia-plug-ins.html">Testing Che-Theia plug-ins</a></li>
          
          
          
          
          
          
          <li><a href="publishing-che-theia-plug-ins.html">Publishing Che-Theia plug-ins</a></li>
          
          
          
          
          
          
          <li><a href="che-extensibility-reference.html">Che extensibility reference</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block: -->
         <p class="external">
             <a href="#" id="collapseAll">Collapse all</a> | <a href="#" id="expandAll">Expand all</a>
         </p>
         
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>

            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Using developer environments - workspaces</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.
$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });
/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top
  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    


    <!-- 


     -->

  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Eclipse Che provides developer workspaces with everything needed to a code, build, test, run, and debug applications. To allow that, the developer workspaces provide four main components:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Project source code</dt>
<dd>
<p>the source code of a project</p>
</dd>
<dt class="hdlist1">Browser-based IDE</dt>
<dd>
<p>a web-based IDE that is packaged by default in a workspace</p>
</dd>
<dt class="hdlist1">Tool dependencies</dt>
<dd>
<p>dependencies needed by developers to work on a project</p>
</dd>
<dt class="hdlist1">Application runtime</dt>
<dd>
<p>a replica of the environment where the application runs in production</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="workspaces-overview_using-developer-environments-workspaces">Workspaces overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eclipse Che workspaces are managed by Kubernetes pods. Everything running in a Che developer workspace is running inside containers and is accessible from the embedded browser-based IDE. Because developer workspaces are containerized, they are highly portable. And because they only need a browser to be accessed, they are easily shareable.</p>
</div>
<div class="sect2">
<h3 id="features-and-benefits">Features and benefits</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Features</th>
<th class="tableblock halign-left valign-top">Traditional IDE workspaces</th>
<th class="tableblock halign-left valign-top">Eclipse Che workspaces</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Configuration and installation required</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Embedded tools</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Partial. IDE plug-ins need configuration. Dependencies need installation and configuration. Example: JDK, Maven, Node, &#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes. Plug-ins provide their dependencies.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Application runtime provided</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">No. Developers have to manage that separately.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes. Application runtime is replicated in the workspace.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Shareable</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">No.Or not easily</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes. Developer workspaces are shareable with a URL.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Versionable</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes. Devfiles live with project source code.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Accessible from anywhere</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">No. Installation is needed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes. Only requires a browser.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Diagram: TODO</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-a-che-workspace-using-a-devfile_using-developer-environments-workspaces">Configuring a Che workspace using a Devfile</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to select a workspace, loading in the required stack and a sample project, all in one step.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://redhat-developer.github.io/devfile/devfile">Devfile specifications</a> for detailed information on how to add or remove components, or how to set memory and environment variables.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You need an OKD, OCP, or OSD cluster, if using Che on Openshift. See below for use of <a href="https://www.okd.io/minishift/">Minishift</a> (OKD).</p>
</li>
<li>
<p>Or, you can use a Kubernetes cluster such as <a href="https://github.com/kubernetes/minikube#installation">Minikube</a>.</p>
</li>
<li>
<p>To install on Minishift or Minikube, see <a href="che-quick-starts.html#deploying-che-using-chectl">Deploying Che using chectl</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="importing-a-project-using-a-devfile">Importing a project using a devfile</h3>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Stacks are defined as <a href="using-developer-environments-workspaces.html#making-a-workspace-portable-using-a-devfile_using-developer-environments-workspaces">devfiles</a>. This gives the user more flexibility when defining the project(s), IDE, commands, tools, and application runtimes needed in their workspace.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In Che 6, a stack is defined with a Dockerfile. In Che 7, <code>devfile.yaml</code> is used instead.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="the-minimal-devfile">The minimal devfile</h3>
<div class="paragraph">
<p>The following is the minimum content required in a <code>devfile.yaml</code> file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://redhat-developer.github.io/devfile/devfile#apiversion">apiVersion</a></p>
</li>
<li>
<p><a href="https://redhat-developer.github.io/devfile/devfile#metadata">metadata name</a></p>
</li>
<li>
<p><a href="https://redhat-developer.github.io/devfile/devfile#projects">projects name and source</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">che-in-che-out</span></span>
<span style="color:#606">projects</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: che</span></span>
    <span style="color:#606">source</span>:
      <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
      <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'https://github.com/eclipse/che.git'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For a complete <code>devfile</code> example file, see <a href="https://github.com/eclipse/che/blob/master/devfile.yaml">Eclipse Che in Che devfile.yaml</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-workspace-from-a-devfile">Creating a workspace from a devfile</h3>
<div class="paragraph">
<p>To create a workspace from a devfile:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Commit a <code>devfile.yaml</code> file into the root of your git repo.</p>
</li>
<li>
<p>When your repository contains a <code>devfile.yaml</code> file, point a running Che 7 instance at that <a href="https://github.com/eclipse/che">project</a> and it will use the discovered <a href="https://github.com/eclipse/che/blob/master/devfile.yaml">devfile.yaml</a> file to build a workspace using the <a href="api-reference.html#factory-api_api-reference">Factory API</a>, <code>/f?url=</code>.</p>
<div class="ulist">
<ul>
<li>
<p>For example, when using <a href="che-quick-starts.html#deploying-che-using-chectl">Che inside Minishift</a>: http://che-che.&lt;your.IP.address.here&gt;.nip.io/f?url=https://github.com/eclipse/che.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/che-in-che-devfile.png" alt="Che in Che">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can also point at a plain text file: http://che-che.&lt;your.IP.address.here&gt;.nip.io/f?url=https://gist.githubusercontent.com/nickboldt/9551284c2c779a93ccf16bc801416205/raw/7ad1e949880d7f8ed30360e74bb9f8426450db05/devfile.yaml.</p>
</li>
<li>
<p>If you are familiar with <a href="https://github.com/che-incubator/chectl/">chectl</a>, you can also reference a local devfile. For example, to create a workspace in which to build the Che project:</p>
<div class="ulist">
<ul>
<li>
<p>First <a href="che-quick-starts.html#deploying-che-using-chectl">deploy Che onto Minishift</a> (or another cluster).</p>
</li>
<li>
<p>Next, fetch the devfile and run <code>chectl</code> to start a workspace called <code>che-in-che</code> from the devfile on your Minishift <code>che-che</code> instance.</p>
<div class="listingblock">
<div class="content">
<pre>$ wget https://raw.githubusercontent.com/eclipse/che/master/devfile.yaml -o /tmp/devfile.yaml

$ ./chectl workspace:start -f /tmp/devfile.yaml -n che-che
  ✔ Retrieving Che Server URL...http://che-che.`your.IP.address.here`.nip.io
  ✔ Verify if Che server is running
  ✔ Create workspace from Devfile /tmp/devfile.yaml

Workspace IDE URL:
http://che-che.`your.IP.address.here`.nip.io/dashboard/#/ide/che/che-in-che</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="using-developer-environments-workspaces.html#making-a-workspace-portable-using-a-devfile_using-developer-environments-workspaces">Making a workspace portable using a Devfile</a></p>
</li>
<li>
<p><a href="https://redhat-developer.github.io/devfile/devfile">Devfile specifications</a></p>
</li>
<li>
<p><a href="che-quick-starts.html#deploying-che-using-chectl">Deploying Che using chectl</a></p>
</li>
<li>
<p><a href="https://docs.okd.io/latest/minishift/getting-started/preparing-to-install.html">Minishift installation</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/minikube#installation">Minikube installation</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="making-a-workspace-portable-using-a-devfile_using-developer-environments-workspaces">Making a workspace portable using a Devfile</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eclipse Che workspaces are defined by a <strong>devfile</strong>. A devfile is the definition of everything that is used in developer workspaces.</p>
</div>
<div class="paragraph">
<p>Che uses devfiles to define:</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>projects to clone</p>
</li>
<li>
<p>browser IDE to use</p>
</li>
<li>
<p>preconfigured commands</p>
</li>
<li>
<p>tools that you need</p>
</li>
<li>
<p>application runtime definition</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you create a workspace, Che uses that definition to initiate everything for you and run all the containers for your tools and your application runtimes. Che also mounts filesystem volumes to make your source code available to the workspace.</p>
</div>
<div class="paragraph">
<p>Devfiles can be versioned with project source code. When you have to get a workspace to fix an old maintenance branch, the project devfile provides you with a definition of the workspace with the tools and the exact dependencies to start working on the old branch. Use it to easily instantiate workspaces on demand.</p>
</div>
<div class="paragraph">
<p>Che maintains the devfile up-to-date with the tools you use in the workspace:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Projects of the workspace (path, Git location, branch, …)</p>
</li>
<li>
<p>Commands to perform daily tasks (build, run, test, debug, …)</p>
</li>
<li>
<p>Runtime environment (container images to run your application)</p>
</li>
<li>
<p>Che-Theia plug-ins with tools, IDE features, and helpers that a developer would use in the workspace (Git, Java support, Sonarlint, Pull Request, …)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="starting-a-workspace-with-a-devfile_making-a-workspace-portable-using-a-devfile">Starting a workspace with a devfile</h3>
<div class="paragraph">
<p>This section describes how to start a Che workspace using your own existing devfile.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A running instance of Eclipse Che.</p>
</li>
<li>
<p>An existing devfile.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>There are several ways to launch a Che workspace based on a prepared devfile:</p>
</div>
<div class="paragraph">
<div class="title">Devfile from Git</div>
<p>Add the devfile to a Git source repository and then create a factory from this repository.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Put a <code>devfile.yaml</code> file in the root of your Git repository.</p>
</li>
<li>
<p>Execute the factory by opening the following URL:</p>
<div class="listingblock">
<div class="content">
<pre>https://<em>&lt;your-che-host&gt;</em>/f?url=https://github.com/<em>&lt;mygroup&gt;</em>/<em>&lt;myrepo&gt;</em></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Devfile from URL</div>
<p>Execute a devfile by constructing the factory with the URL pointing to the raw content of the devfile, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>https://<em>&lt;your-che-host&gt;</em>/f?url=https://pastebin.com/raw/ux6iCGaW</pre>
</div>
</div>
<div class="paragraph">
<div class="title">Devfile using the <code>chectl</code> tool</div>
<p>Execute workspace from a devfile using the <code>workspace:start</code> parameter with the <code>chectl</code> tool as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ chectl workspace:start --devfile=devfile.yaml</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="writing-a-devfile-for-your-project_making-a-workspace-portable-using-a-devfile">Writing a Devfile for your project</h3>
<div class="paragraph">
<p>This section describes how to create a minimal devfile for your project and how to include more than one projects in a devfile.</p>
</div>
<div class="sect3">
<h4 id="preparing-a-minimal-devfile_making-a-workspace-portable-using-a-devfile">Preparing a minimal devfile</h4>
<div class="paragraph">
<p>A minimal devfile sufficient to run a workspace consists of the following parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Specification version</p>
</li>
<li>
<p>Name</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example of a minimal devfile with no project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">minimal-workspace</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Without any further configuration, a workspace with the default editor will be launched along with its default plug-ins, which are configured on Che Server. Che-Theia is configured as the default editor along with the <strong>Che Machine Exec</strong> plug-in.</p>
</div>
<div class="paragraph">
<p>To get a more functional workspace, the following parts can be added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>List of components: development components and user runtimes</p>
</li>
<li>
<p>List of projects: source code repositories</p>
</li>
<li>
<p>List of commands: actions to manage the workspace components, such as running the development tools, starting the runtime environments, and others</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example of a minimal devfile with a project</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">petclinic-dev-environment</span></span>
<span style="color:#606">projects</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: petclinic</span></span>
    <span style="color:#606">source</span>:
      <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
      <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'https://github.com/spring-projects/spring-petclinic.git'</span></span>
<span style="color:#606">components</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">type: chePlugin</span></span>
    <span style="color:#606">id</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">redhat/java/latest</span></span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="specifying-multiple-projects-in-a-devfile_making-a-workspace-portable-using-a-devfile">Specifying multiple projects in a devfile</h4>
<div class="paragraph">
<p>A single devfile can specify multiple projects. For each project, specify the type of the source repository, its location, and optionally also the directory to which the project should be cloned to.</p>
</div>
<div class="listingblock">
<div class="title">Example of a devfile with two projects</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">example-devfile</span></span>
<span style="color:#606">projects</span>:
- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: frontend</span></span>
  <span style="color:#606">source</span>:
    <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
    <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://github.com/acmecorp/frontend.git</span></span>
- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: backend</span></span>
  <span style="color:#606">clonePath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">src/github.com/acmecorp/backend</span></span>
  <span style="color:#606">source</span>:
    <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
    <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://github.com/acmecorp/backend.git</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, there are two projects defined, <code>frontend</code> and <code>backend</code>. Each project is located in its own repository. The <code>backend</code> project has a specific requirement to be cloned into the <code>src/github.com/acmecorp/backend/</code> directory under the source root (implicitly defined by the Che runtime) while the <code>frontend</code> project will be cloned into the <code>frontend/</code> directory under the source root.</p>
</div>
<div class="paragraph">
<div class="title">Additional resources</div>
<p>For a detailed explanation of all devfile component assignments and possible values, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/redhat-developer/devfile">Specification repository</a></p>
</li>
<li>
<p><a href="https://redhat-developer.github.io/devfile/devfile">detailed json-schema documentation</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devfile-reference_making-a-workspace-portable-using-a-devfile">Devfile reference</h3>
<div class="paragraph">
<p>This section contains devfile reference and instructions on how to use the various elements that devfiles consist of.</p>
</div>
<div class="sect3">
<h4 id="adding-components-to-a-devfile">Adding components to a devfile</h4>
<div class="paragraph">
<p>Each component in a single devfile must have a unique name.</p>
</div>
<div class="sect4">
<h5 id="component-type-cheeditor">Component type: cheEditor</h5>
<div class="paragraph">
<p>Describes the editor used in the workspace by defining its <code>id</code>. A devfile can only contain one component of the <code>cheEditor</code> type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">components</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: theia-editor</span></span>
    <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cheEditor</span></span>
    <span style="color:#606">id</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">eclipse/che-theia/next</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When <code>cheEditor</code> is missing, a default editor is provided along with its default plug-ins. The default plug-ins are also provided for an explicitly defined editor with the same <code>id</code> as the default one (even if it is a different version). Che-Theia is configured as default editor along with the <strong>Che Machine Exec</strong> plug-in.</p>
</div>
<div class="paragraph">
<p>To specify that a workspace requires no editor, use the <a href="#attribute-editorfree_making-a-workspace-portable-using-a-devfile"><code>editorFree:true</code> attribute</a> in the devfile attributes.</p>
</div>
</div>
<div class="sect4">
<h5 id="component-type-cheplugin">Component type: chePlugin</h5>
<div class="paragraph">
<p>Describes plug-ins in a workspace by defining their <code>id</code>. It is allowed to have several <code>chePlugin</code> components.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span style="color:#606">components</span>:
   - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: exec-plugin</span></span>
     <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">chePlugin</span></span>
     <span style="color:#606">id</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">eclipse/che-machine-exec-plugin/0.0.1</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Both types above using id, which is slash-separated publisher, name and version of plugin from Che Plugin registry.<br>
List of available Che plugins and more information about registry can be found on <a href="https://github.com/eclipse/che-plugin-registry" class="bare">https://github.com/eclipse/che-plugin-registry</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="specifying-an-alternative-component-registry">Specifying an alternative component registry</h5>
<div class="paragraph">
<p>To specify an alternative registry for the <code>cheEditor</code> and <code>chePlugin</code> component types, use the <code>registryUrl</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span style="color:#606">components</span>:
   - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: exec-plugin</span></span>
     <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">chePlugin</span></span>
     <span style="color:#606">registryUrl</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://my-customregistry.com</span></span>
     <span style="color:#606">id</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">eclipse/che-machine-exec-plugin/0.0.1</span></span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="specifying-a-component-by-linking-to-its-descriptor">Specifying a component by linking to its descriptor</h5>
<div class="paragraph">
<p>An alternative way of specifying <code>cheEditor</code> or <code>chePlugin</code>, instead of using the editor or plug-in <code>id</code> (and optionally an alternative registry), is to provide a direct link to the component descriptor (typically named <code>meta.yaml</code>) by using the <code>reference</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span style="color:#606">components</span>:
   - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: exec-plugin</span></span>
     <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">chePlugin</span></span>
     <span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://raw.githubusercontent.com.../plugin/1.0.1/meta.yaml</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is not possible to mix the <code>id</code> and <code>reference</code> fields in a single component definition; they are mutually exclusive.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="specifying-container-memory-limit-for-components">Specifying container memory limit for components</h5>
<div class="paragraph">
<p>To specify a container(s) memory limit for <code>cheEditor</code> or <code>chePlugin</code>, use the <code>memoryLimit</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span style="color:#606">components</span>:
   - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: exec-plugin</span></span>
     <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">chePlugin</span></span>
     <span style="color:#606">id</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">eclipse/che-machine-exec-plugin/0.0.1</span></span>
     <span style="color:#606">memoryLimit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">256M</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This limit will be applied to every container of the given component.</p>
</div>
</div>
<div class="sect4">
<h5 id="tuning-component-configuration">Tuning component configuration</h5>
<div class="paragraph">
<p>A component may need to be precisely tuned, and in such case, component preferences can be used. The example shows how to configure JVM using plug-in preferences.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span style="color:#606">id</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">redhat/java/0.38.0</span></span>
  <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">chePlugin</span></span>
  <span style="color:#606">preferences</span>:
     <span style="color:#606">java.jdt.ls.vmargs</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'-noverify -Xmx1G -XX:+UseG1GC -XX:+UseStringDeduplication'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="component-type-kubernetes">Component type: kubernetes</h5>
<div class="paragraph">
<p>A complex component type that allows to apply configuration from a Kubernetes or OpenShift lists. The content of the component can be provided either via the <code>reference</code> attribute, which points to the file with the component content.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span style="color:#606">components</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: mysql</span></span>
      <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubernetes</span></span>
      <span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">petclinic.yaml</span></span>
      <span style="color:#606">selector</span>:
        <span style="color:#606">app.kubernetes.io/name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mysql</span></span>
        <span style="color:#606">app.kubernetes.io/component</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">database</span></span>
        <span style="color:#606">app.kubernetes.io/part-of</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">petclinic</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, to post a devfile with such components to REST API, the contents of the Kubernetes or OpenShift list can be embedded into the devfile using the <code>referenceContent</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span style="color:#606">components</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: mysql</span></span>
      <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubernetes</span></span>
      <span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">petclinic.yaml</span></span>
      <span style="color:#606">referenceContent</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">|</span><span style="color:#D20">
           kind: List
           items:
            -
             apiVersion: v1
             kind: Pod
             metadata:
              name: ws
             spec:
              containers:
              ... etc</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As with the <a href="#component-type-dockerimage_making-a-workspace-portable-using-a-devfile"><code>dockerimage</code> component</a>, it is possible to override the entrypoint of the containers contained in the Kubernetes or OpenShift list using the <code>command</code> and <code>args</code> properties (as <a href="https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#notes">understood</a> by Kubernetes).</p>
</div>
<div class="paragraph">
<p>There can be more containers in the list (contained in pods or pod templates of deployments). To select which containers to apply the entrypoint changes to.</p>
</div>
<div class="paragraph">
<p>The entrypoints can be defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span style="color:#606">components</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: appDeployment</span></span>
      <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubernetes</span></span>
      <span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">app-deployment.yaml</span></span>
      <span style="color:#606">entrypoints</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">parentName: mysqlServer</span></span>
        <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">['sleep']</span></span>
        <span style="color:#606">args</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">['infinity']</span></span>
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">parentSelector:</span><span style="color:#D20">
          app: prometheus</span></span>
        <span style="color:#606">args</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">['-f', '/opt/app/prometheus-config.yaml']</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>entrypoints</code> list contains constraints for picking the containers along with the <code>command</code> and <code>args</code> parameters to apply to them. In the example above, the constraint is <code>parentName: mysqlServer</code>, which will cause the command to be applied to all containers defined in any parent object called <code>mysqlServer</code>. The parent object is assumed to be a top level object in the list defined in the referenced file, which is <code>app-deployment.yaml</code> in the example above.</p>
</div>
<div class="paragraph">
<p>Other types of constraints (and their combinations) are possible:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>containerName</code></dt>
<dd>
<p>the name of the container</p>
</dd>
<dt class="hdlist1"><code>parentName</code></dt>
<dd>
<p>the name of the parent object that (indirectly) contains the containers to override</p>
</dd>
<dt class="hdlist1"><code>parentSelector</code></dt>
<dd>
<p>the set of labels the parent object needs to have</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>A combination of these constraints can be used to precisely locate the containers inside the referenced Kubernetes list.</p>
</div>
</div>
<div class="sect4">
<h5 id="specifying-mount-sources-option">Specifying mount sources option</h5>
<div class="paragraph">
<p>To specify a project sources directory mount into container(s), use the <code>mountSources</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">   <span style="color:#606">components</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: appDeployment</span></span>
        <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubernetes</span></span>
        <span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">app-deployment.yaml</span></span>
        <span style="color:#606">mountSources</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If enabled, project sources mounts will be applied to every container of the given component.
This parameter is also applicable for <code>chePlugin</code> type components.</p>
</div>
</div>
<div class="sect4">
<h5 id="component-type-dockerimage_making-a-workspace-portable-using-a-devfile">Component type: dockerimage</h5>
<div class="paragraph">
<p>A component type that allows to define a container image-based configuration of a container in a workspace. A devfile can only contain one component of the <code>dockerimage</code> type. The <code>dockerimage</code> type of component brings in custom tooling into the workspace. The component is identified by its image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"> <span style="color:#606">components</span>:
   - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: maven</span></span>
     <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dockerimage</span></span>
     <span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">eclipe/maven-jdk8:latest</span></span>
     <span style="color:#606">volumes</span>:
       - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: mavenrepo</span></span>
         <span style="color:#606">containerPath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/root/.m2</span></span>
     <span style="color:#606">env</span>:
       - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: ENV_VAR</span></span>
         <span style="color:#606">value</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">value</span></span>
     <span style="color:#606">endpoints</span>:
       - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: maven-server</span></span>
         <span style="color:#606">port</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">3101</span></span>
         <span style="color:#606">attributes</span>:
           <span style="color:#606">protocol</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">http</span></span>
           <span style="color:#606">secure</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'true'</span></span>
           <span style="color:#606">public</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'true'</span></span>
           <span style="color:#606">discoverable</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'false'</span></span>
     <span style="color:#606">memoryLimit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1536M</span></span>
     <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">['tail']</span></span>
     <span style="color:#606">args</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">['-f', '/dev/null']</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Example of a minimal <code>dockerimage</code> component</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">MyDevfile</span></span>
<span style="color:#606">components</span>:
<span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dockerimage</span></span>
<span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">golang</span></span>
<span style="color:#606">memoryLimit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">512Mi</span></span>
<span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[‘sleep’, ‘infinity’]</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It specifies the type of the component, <code>dockerimage</code> and the <code>image</code> attribute names the image to be used for the component using the usual docker naming conventions, that is, the above <code>type</code> attribute is equal to <code>docker.io/library/golang:latest</code>.</p>
</div>
<div class="paragraph">
<p>A <code>dockerimage</code> component has many features that enable augmenting the image with additional resources and information needed for meaningful integration of the <strong>tool</strong> provided by the image with Eclipse Che.</p>
</div>
<div class="sect5">
<h6 id="mounting-project-sources">Mounting project sources</h6>
<div class="paragraph">
<p>For the <code>dockerimage</code> component to have access to the project sources, you must set the <code>mountSources</code> attribute to <code>true</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">MyDevfile</span></span>
<span style="color:#606">components</span>:
<span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dockerimage</span></span>
<span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">golang</span></span>
<span style="color:#606">memoryLimit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">512Mi</span></span>
<span style="color:#606">mountSources</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
<span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[‘sleep’, ‘infinity’]</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The sources is mounted on a location stored in the <code>CHE_PROJECTS_ROOT</code> environment variable that is made available in the running container of the image. This location defaults to <code>/projects</code>.</p>
</div>
</div>
<div class="sect5">
<h6 id="container-entrypoint">Container Entrypoint</h6>
<div class="paragraph">
<p>The <code>command</code> attribute of the <code>dockerimage</code> along with other arguments, is used to modify the <code>entrypoint</code> command of the container created from the image. In Eclipse Che the container is needed to run indefinitely so that you can connect to it and execute arbitrary commands in it at any time. Because the availability of the <code>sleep</code> command and the support for the <code>infinity</code> argument for it is different and depends on the base image used in the particular images, Che cannot insert this behavior automatically on its own. However, you can take advantage of this feature to, for example, start up necessary servers with modified configurations, etc.</p>
</div>
</div>
<div class="sect5">
<h6 id="persistent-storage">Persistent Storage</h6>
<div class="paragraph">
<p>Docker image tools can specify the custom volumes to be mounted on specific locations within the image. Note that the volume names are shared across all components and therefore this mechanism can also be used to share file systems between components.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">MyDevfile</span></span>
<span style="color:#606">components</span>:
<span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dockerimage</span></span>
<span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">golang</span></span>
<span style="color:#606">memoryLimit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">512Mi</span></span>
<span style="color:#606">mountSources</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
<span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[‘sleep’, ‘infinity’]</span></span>
<span style="color:#606">volumes</span>:
<span style="color:#F00;background-color:#FAA">        </span>- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: cache</span></span>
<span style="color:#F00;background-color:#FAA">        </span>  <span style="color:#606">containerPath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/.cache</span></span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="environment">Environment</h6>
<div class="paragraph">
<p>Eclipse Che allows you to configure Docker containers by modifying the environment variables available in the container of an image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">MyDevfile</span></span>
<span style="color:#606">projects</span>:
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">my-go-project</span></span>
<span style="color:#606">source</span>:
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://github.com/acme/my-go-project.git</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">clonePath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">go/src/github.com/acme/my-go-project</span></span>
<span style="color:#606">components</span>:
<span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dockerimage</span></span>
<span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">golang</span></span>
<span style="color:#606">memoryLimit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">512Mi</span></span>
<span style="color:#606">mountSources</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
<span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[‘sleep’, ‘infinity’]</span></span>
<span style="color:#606">env</span>:
<span style="color:#F00;background-color:#FAA">        </span>- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: GOPATH</span></span>
<span style="color:#F00;background-color:#FAA">        </span>  <span style="color:#606">value</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">$(CHE_PROJECTS_ROOT)/go</span></span>
<span style="color:#F00;background-color:#FAA">        </span>- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: GOCACHE</span><span style="color:#D20">
       value: /tmp/go-cache</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>The variable expansion works between the environment variables and it uses the Kubernetes convention for the variable references.</p>
</li>
<li>
<p>You can use the predefined variables in your own definitions.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following environment variables are pre-set by the Che server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CHE_PROJECTS_ROOT</code>: The location of the projects directory (note that if the component does not mount the sources, the projects will not be accessible).</p>
</li>
<li>
<p><code>CHE_WORKSPACE_LOGS_ROOT__DIR</code>: The location of the logs common to all the components. If the component chooses to put logs into this directory, the log files are accessible from all other components.</p>
</li>
<li>
<p><code>CHE_API_INTERNAL</code>: The URL to the Che server API endpoint used for communication with the Che server.</p>
</li>
<li>
<p><code>CHE_WORKSPACE_ID</code>: The ID of the current workspace.</p>
</li>
<li>
<p><code>CHE_WORKSPACE_NAME</code>: The name of the current workspace.</p>
</li>
<li>
<p><code>CHE_WORKSPACE_NAMESPACE</code>: The namespace of the current workspace.</p>
</li>
<li>
<p><code>CHE_MACHINE_TOKEN</code>: The token used to authenticate the request against the Che server.</p>
</li>
<li>
<p><code>CHE_MACHINE_AUTH_SIGNATURE<em>PUBLIC</em>KEY</code>: The public key used to secure the communication with the Che server.</p>
</li>
<li>
<p><code>CHE_MACHINE_AUTH_SIGNATURE__ALGORITHM</code>: The encryption algorithm used in the secured communication with the Che server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A devfiles may only need the <code>CHE_PROJECTS_ROOT</code> environment variable to locate the cloned projects in the component’s container. More advanced devfiles might use the <code>CHE_WORKSPACE_LOGS_ROOT__DIR</code> environment variable to read the logs (for example as part of a devfile command). The environment variables used to securely access the Che server are mostly out of scope for devfiles and are present only for advanced use cases that are usually handled by the Che plug-ins.</p>
</div>
</div>
<div class="sect5">
<h6 id="endpoints">Endpoints</h6>
<div class="paragraph">
<p>You can specify the endpoints that the docker image exposes. These endpoints can be made accessible to the users if the Che cluster is running using a Kubernetes ingress or an OpenShift route and to the other components within the workspace. You can create an endpoint for your application or database, if your application or database server is listening on a port and you want to be able to directly interact with it yourself or you want other components to interact with it.</p>
</div>
<div class="paragraph">
<p>Endpoints have a number of properties as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">MyDevfile</span></span>
<span style="color:#606">projects</span>:
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">my-go-project</span></span>
<span style="color:#606">source</span>:
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://github.com/acme/my-go-project.git</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">clonePath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">go/src/github.com/acme/my-go-project</span></span>
<span style="color:#606">components</span>:
<span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dockerimage</span></span>
<span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">golang</span></span>
<span style="color:#606">memoryLimit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">512Mi</span></span>
<span style="color:#606">mountSources</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
<span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[‘sleep’, ‘infinity’]</span></span>
<span style="color:#606">env</span>:
<span style="color:#F00;background-color:#FAA">        </span>- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: GOPATH</span></span>
<span style="color:#F00;background-color:#FAA">        </span>  <span style="color:#606">value</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">$(CHE_PROJECTS_ROOT)/go</span></span>
<span style="color:#F00;background-color:#FAA">        </span>- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: GOCACHE</span><span style="color:#D20">
       value: /tmp/go-cache</span></span>
<span style="color:#606">endpoints</span>:
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">web</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">port</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">8080</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">attributes</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">discoverable</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">false</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">public</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">protocol</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">http</span></span>
<span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dockerimage</span></span>
<span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
<span style="color:#606">memoryLimit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">512Mi</span></span>
<span style="color:#606">env</span>:
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">POSTGRES_USER</span></span>
<span style="color:#606">value</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">user</span></span>
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">POSTGRES_PASSWORD</span></span>
<span style="color:#606">value</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">password</span></span>
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">POSTGRES_DB</span><span style="color:#D20">
           value: database</span></span>
<span style="color:#606">endpoints</span>:
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">port</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">5432</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">attributes</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">discoverable</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">public</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">false</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, there are two dockerimages, each defining a single endpoint. Endpoint is an accessible port that can be made accessible inside the workspace or also publicly (example, from the UI). Each endpoint has a name and port, which is the port on which certain server running inside the container is listening. The following are a few attributes that you can set on the endpoint:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>discoverable</code>: If an endpoint is discoverable, it means that it can be accessed using its name as the hostname within the workspace containers (in the Kubernetes parlance, a service is created for it with the provided name).</p>
</li>
<li>
<p><code>public</code>: The endpoint will be accessible outside of the workspace, too (such endpoint can be accessed from the Che user interface). Such endpoints are publicized always on port <code>80</code> or <code>443</code> (depending on whether <code>tls</code> is enabled in Che).</p>
</li>
<li>
<p><code>protocol</code>: For public endpoints the protocol is a hint to the UI on how to construct the URL for the endpoint access. Typical values are <code>http</code>, <code>https</code>, <code>ws</code>, <code>wss</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you start a new server within your component, Che will autodetect this and the UI will offer you to automatically expose this port as a <code>public</code> port. This is useful for debugging a web application, for example. But, it is not possible to do this for servers that autostart with the container (for example, a database server). For such components, you must specify the endpoints explicitly.</p>
</div>
</div>
<div class="sect5">
<h6 id="kubernetes-and-openshift-resources">Kubernetes and OpenShift resources</h6>
<div class="paragraph">
<p>Complex deployments can be described using Kubernetes or OpenShift resource lists that can be referenced in the devfile. This will make them part of the workspace.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Because a Che workspace is internally represented as a single deployment, all resources from the Kubernetes or OpenShift list are merged into that single deployment.</p>
</li>
<li>
<p>You must be careful when designing such lists because this can result in name conflicts and other problems.</p>
</li>
<li>
<p>Only the following subset of the Kubernetes objects are supported: <code>deployments</code>, <code>pods</code>, <code>services</code>, <code>persistent volume claims</code>, <code>secrets</code>, and <code>config maps</code>. Kubernetes ingresses are ignored but OpenShift routes are supported. A workspace created from a devfile using any other object types will fail to start.</p>
</li>
<li>
<p>If you run Che on a Kubernetes cluster, only Kubernetes lists are supported. However, if you run Che on an OpenShift cluster, both Kubernetes and OpenShift lists are supported (because OpenShift is a superset of Kubernetes).</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">MyDevfile</span></span>
<span style="color:#606">projects</span>:
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">my-go-project</span></span>
<span style="color:#606">source</span>:
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://github.com/acme/my-go-project.git</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">clonePath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">go/src/github.com/acme/my-go-project</span></span>
<span style="color:#606">components</span>:
<span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubernetes</span></span>
<span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">../relative/path/postgres.yaml</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding component references a file that is relative to the location of the devfile itself. Meaning, this devfile is only loadable by a Che factory to which you supply the location of the devfile and therefore it is able to figure out the location of the referenced Kubernetes resource list.</p>
</div>
<div class="paragraph">
<p>The following is an example of the <code>postgres.yaml</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">List</span></span>
<span style="color:#606">items</span>:
-
    <span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
    <span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Deployment</span></span>
    <span style="color:#606">metadata</span>:
            <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
            <span style="color:#606">labels</span>:
                    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
    <span style="color:#606">spec</span>:
            <span style="color:#606">template</span>:
            <span style="color:#606">metadata</span>:
                    <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
                    <span style="color:#606">app</span>:
                            <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
            <span style="color:#606">spec</span>:
                    <span style="color:#606">containers</span>:
                    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: postgres</span></span>
                            <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
                            <span style="color:#606">ports</span>:
                            - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: postgres</span></span>
                                    <span style="color:#606">containerPort</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">5432</span></span>
                            <span style="color:#606">volumeMounts</span>:
                            - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: pg-storage</span></span>
                                    <span style="color:#606">mountPath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/var/lib/postgresql/data</span></span>
                    <span style="color:#606">volumes</span>:
                    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: pg-storage</span></span>
                            <span style="color:#606">persistentVolumeClaim</span>:
                                    <span style="color:#606">claimName</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pg-storage</span></span>
-
    <span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
    <span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Service</span></span>
    <span style="color:#606">metadata</span>:
            <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
            <span style="color:#606">labels</span>:
                    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
            <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
    <span style="color:#606">spec</span>:
            <span style="color:#606">ports</span>:
                    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">port: 5432</span></span>
                            <span style="color:#606">targetPort</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">5432</span></span>
            <span style="color:#606">selector</span>:
                    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span>
-
    <span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
    <span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">PersistentVolumeClaim</span></span>
    <span style="color:#606">metadata</span>:
            <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pg-storage</span><span style="color:#D20">
      labels:
        app: postgres</span></span>
    <span style="color:#606">spec</span>:
            <span style="color:#606">accessModes</span>:
             - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ReadWriteOnce</span></span>
            <span style="color:#606">resources</span>:
                    <span style="color:#606">requests</span>:
                            <span style="color:#606">storage</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1Gi</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For a basic example of a devfile with an associated Kubernetes or OpenShift list, see <a href="https://github.com/redhat-developer/devfile/tree/master/samples/web-nodejs-with-db-sample" class="bare">https://github.com/redhat-developer/devfile/tree/master/samples/web-nodejs-with-db-sample</a>.</p>
</div>
<div class="paragraph">
<p>If you use generic or large resource lists from which you will only need a subset of resources, you can select particular resources from the list using a selector (which, as the usual Kubernetes selectors, works on the labels of the resources in the list).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">MyDevfile</span></span>
<span style="color:#606">projects</span>:
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">my-go-project</span></span>
<span style="color:#606">source</span>:
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://github.com/acme/my-go-project.git</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">clonePath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">go/src/github.com/acme/my-go-project</span></span>
<span style="color:#606">components</span>:
<span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubernetes</span></span>
<span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">../relative/path/postgres.yaml</span></span>
<span style="color:#606">selector</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">postgres</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, it is also possible to modify the entrypoints (command and arguments) of the containers present in the resource list. For details of the advanced use case, see the reference (TODO: link).</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="adding-commands-to-a-devfile">Adding commands to a devfile</h4>
<div class="paragraph">
<p>A devfile allows to specify commands to be available for execution in a workspace. Every command can contain a subset of actions, which are related to a specific component in whose container it will be executed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"> <span style="color:#606">commands</span>:
   - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: build</span></span>
     <span style="color:#606">actions</span>:
       - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">type: exec</span></span>
         <span style="color:#606">component</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mysql</span></span>
         <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mvn clean</span></span>
         <span style="color:#606">workdir</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/projects/spring-petclinic</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use commands to automate the workspace. You can define commands for building and testing your code, or cleaning the database.</p>
</div>
<div class="paragraph">
<p>The following are two kinds of commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Che specific commands: You have full control over what component executes the command.</p>
</li>
<li>
<p>Editor specific commands: You can use the editor-specific command definitions (example: <code>tasks.json</code> and <code>launch.json</code> in Theia, which is equivalent to how these files work in VS Code).</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="che-specific-commands">Che-specific commands</h5>
<div class="paragraph">
<p>Each che-specific command has an <strong>action</strong> attribute that is a command to execute and a <strong>component</strong> attribute that specifies the container in which the command should be executed. The commands are run using the default shell in the container.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">MyDevfile</span></span>
<span style="color:#606">projects</span>:
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">my-go-project</span></span>
<span style="color:#606">source</span>:
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://github.com/acme/my-go-project.git</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">clonePath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">go/src/github.com/acme/my-go-project</span></span>
<span style="color:#606">components</span>:
<span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">dockerimage</span></span>
<span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">golang</span></span>
<span style="color:#606">alias</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">go-cli</span></span>
<span style="color:#606">memoryLimit</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">512Mi</span></span>
<span style="color:#606">mountSources</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span>
<span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[‘sleep’, ‘infinity’]</span></span>
<span style="color:#606">env</span>:
<span style="color:#F00;background-color:#FAA">        </span>- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: GOPATH</span></span>
<span style="color:#F00;background-color:#FAA">        </span>  <span style="color:#606">value</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">$(CHE_PROJECTS_ROOT)/go</span></span>
<span style="color:#F00;background-color:#FAA">        </span>- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: GOCACHE</span><span style="color:#D20">
       value: /tmp/go-cache</span></span>
<span style="color:#606">commands</span>:
- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: compile and run</span></span>
  <span style="color:#606">actions</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">type: exec</span></span>
    <span style="color:#606">component</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">go-cli</span></span>
    <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">“go get -d &amp;&amp; go run main.go”</span></span>
    <span style="color:#606">workdir</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">“${CHE_PROJECTS_ROOT}/src/github.com/acme/my-go-project”</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>If a component to be used in a command must have an alias. This alias is used to reference the component in the command definition. Example: <code>alias: go-cli</code> in the component definition and <code>component: go-cli</code> in the command definition. This ensures that Eclipse Che can find the correct container to run the command in.</p>
</li>
<li>
<p>A command can have only one action.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="editor-specific-commands">Editor-specific commands</h5>
<div class="paragraph">
<p>If the editor in the workspace supports it, the devfile can specify additional configuration in the editor-specific format. This is dependent on the integration code present in the workspace editor itself and so is not a generic mechanism. However, the default Theia editor within Eclipse Che is equipped to understand the <code>tasks.json</code> and <code>launch.json</code> files provided in the devfile.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">MyDevfile</span></span>
<span style="color:#606">projects</span>:
<span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">my-go-project</span></span>
<span style="color:#606">source</span>:
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
<span style="color:#F00;background-color:#FAA">        </span>   <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://github.com/acme/my-go-project.git</span></span>
<span style="color:#F00;background-color:#FAA">        </span><span style="color:#606">clonePath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">go/src/github.com/acme/my-go-project</span></span>
<span style="color:#606">commands</span>:
            - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: tasks</span></span>
       <span style="color:#606">actions</span>:
         - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">type: vscode-task</span></span>
           <span style="color:#606">referenceContent</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&gt;</span></span>
                            {
                                    <span style="color:#606"><span style="color:#404">&quot;</span><span>version</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">2.0.0</span><span style="color:#710">&quot;</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">,</span></span>
                                    <span style="color:#606"><span style="color:#404">&quot;</span><span>tasks</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">[</span></span>
                                            {
                                                    <span style="color:#606"><span style="color:#404">&quot;</span><span>label</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">create test file</span><span style="color:#710">&quot;</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">,</span></span>
                                                    <span style="color:#606"><span style="color:#404">&quot;</span><span>type</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">shell</span><span style="color:#710">&quot;</span></span><span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">,</span></span>
                                                    <span style="color:#606"><span style="color:#404">&quot;</span><span>command</span><span style="color:#404">&quot;</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">touch ${workspaceFolder}/test.file</span><span style="color:#710">&quot;</span></span>
                                            }
                                    ]
                            }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example shows association of a <code>tasks.json</code> file with a devfile. Notice the <code>vscode-task</code> type that instructs the Che-Theia editor to interpret this command as a tasks definition and <code>referenceContent</code> attribute that contains the contents of the file itself. You can also save this file separately from the devfile and use <code>reference</code> attribute to specify a relative or absolute URL to it.</p>
</div>
<div class="paragraph">
<p>In addition to the <code>vscode-task</code> commands, the Che-Theia editor understands <code>vscode-launch</code> type using which you can specify the launch configurations.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devfile-attributes">Devfile attributes</h4>
<div class="paragraph">
<p>Devfile attributes can be used to configure various features.</p>
</div>
<div class="sect4">
<h5 id="attribute-editorfree_making-a-workspace-portable-using-a-devfile">Attribute: editorFree</h5>
<div class="paragraph">
<p>When an editor is not specified in a devfile, a default is provided. When no editor is needed, the <code>editorFree</code> attribute should be used. The default value is <code>false</code>, and it means that the devfile needs the default editor to be provisioned.</p>
</div>
<div class="listingblock">
<div class="title">Example of a devfile without an editor</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">petclinic-dev-environment</span></span>
<span style="color:#606">components</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: myApp</span></span>
    <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubernetes</span></span>
    <span style="color:#606">local</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">my-app.yaml</span></span>
<span style="color:#606">attributes</span>:
  <span style="color:#606">editorFree</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">true</span></span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="attribute-persistvolumes-ephemeral-mode">Attribute: persistVolumes (ephemeral mode)</h5>
<div class="paragraph">
<p>By default, volumes and PVCs specified in a devfile are bound to a host folder to persist data even after a container restart. Sometimes, it may be necessary to disable data persistence, such as when volume backend is slow, and it is needed to make workspace faster. To achieve it, the <code>persistVolumes</code> devfile attribute should be used. The default value is <code>true</code>, and in case of <code>false</code>, <code>emptyDir</code> volumes will be used for configured volumes and PVC.</p>
</div>
<div class="listingblock">
<div class="title">Example of a devfile with ephemeral mode enabled</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">petclinic-dev-environment</span></span>
<span style="color:#606">projects</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: petclinic</span></span>
    <span style="color:#606">source</span>:
      <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git</span></span>
      <span style="color:#606">location</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'https://github.com/che-samples/web-java-spring-petclinic.git'</span></span>
<span style="color:#606">attributes</span>:
  <span style="color:#606">persistVolumes</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">false</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="objects-supported-in-eclipse-che">Objects supported in Eclispe Che 7</h3>
<div class="paragraph">
<p>The following table lists the objects that are partially supported in Eclipse Che 7:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Object</th>
<th class="tableblock halign-left valign-top">API</th>
<th class="tableblock halign-left valign-top">Kubernetes Infra</th>
<th class="tableblock halign-left valign-top">OpenShift Infra</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ConfigMap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PVC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secret</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ingress</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kubernetes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minishift allows you to create Ingress and it works when the host is specified (OpenShift creates a route for it). But, the <code>loadBalancer</code> IP is not provisioned. To add Ingress support for the OpenShift infrastructure node, generate routes based on the provided Ingress.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Route</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The OpenShift recipe must be made compatible with the Kubernetes Infrastructure and, instead of the provided route, generate Ingress.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Kubernetes API does not support templates. A workspace with a template in the recipe starts successfully and the default parameters are resolved.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="importing-a-kubernetes-application-into-a-che-workspace_using-developer-environments-workspaces">Importing a Kubernetes application into a Che workspace</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to import a Kubernetes application in a Che workspace.</p>
</div>
<div class="paragraph">
<p>For demonstration purposes, the section uses a sample Kubernetes application having the following two pods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A NodeJS application specified by this <a href="https://raw.githubusercontent.com/redhat-developer/devfile/master/samples/web-nodejs-with-db-sample/nodejs-app.yaml">nodejs-app.yaml</a></p>
</li>
<li>
<p>A MongoDB pod specified by this <a href="https://raw.githubusercontent.com/redhat-developer/devfile/master/samples/web-nodejs-with-db-sample/mongo-db.yaml">mongo-db.yaml</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To run the application on a Kubernetes cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ node=https://raw.githubusercontent.com/redhat-developer/devfile/master/samples/web-nodejs-with-db-sample/nodejs-app.yaml &amp;&amp; \
mongo=https://raw.githubusercontent.com/redhat-developer/devfile/master/samples/web-nodejs-with-db-sample/mongo-db.yaml &amp;&amp; \
kubectl apply -f ${mongo} &amp;&amp; \
kubectl apply -f ${node}</pre>
</div>
</div>
<div class="paragraph">
<p>To deploy a new instance of this application in a Che workspace, use one of the following three scenarios:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Starting from scratch: <a href="#including-a-kubernetes-application-in-a-workspace-devfile-definition_importing-a-kubernetes-application-into-a-che-workspace">Writing a new devfile</a></p>
</li>
<li>
<p>Modifying an existing workspace: <a href="#adding-a-kubernetes-application-to-an-existing-workspace-using-the-dashboard_importing-a-kubernetes-application-into-a-che-workspace">Using the dashboard UI</a></p>
</li>
<li>
<p>From a running application: <a href="#generating-a-devfile-from-an-existing-kubernetes-application_importing-a-kubernetes-application-into-a-che-workspace">Generating a devfile with <code>chectl</code></a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="including-a-kubernetes-application-in-a-workspace-devfile-definition_importing-a-kubernetes-application-into-a-che-workspace">Including a Kubernetes application in a workspace devfile definition</h3>
<div class="paragraph">
<p>The devfile format is used to define a Che workspace, and its format is described in the <a href="#making-a-workspace-portable-using-a-devfile_using-developer-environments-workspaces">Making a workspace portable using a devfile</a> section. The following is an example of the simplest devfile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
 <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">minimal-workspace</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Only the name (minimal-workspace) is specified. After the Che server processes this devfile, the devfile is converted to a minimal Che workspace that only has the default editor (Che-Theia) and the default editor plug-ins (example: the terminal).</p>
</div>
<div class="paragraph">
<p>Use the <code>Kubernetes</code> type of components in the devfile to add Kubernetes applications to a workspace.</p>
</div>
<div class="paragraph">
<p>For example, the user can embed the <code>NodeJS-Mongo</code> application in the minimal-workspace defined in this paragraph by adding a <code>components</code> section.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
 <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">minimal-workspace</span></span>
<span style="color:#606">components</span>:
 - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">type: kubernetes</span></span>
   <span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://raw.githubusercontent.com/.../mongo-db.yaml</span></span>
 - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: nodejs-app</span></span>
   <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubernetes</span></span>
   <span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://raw.githubusercontent.com/.../nodejs-app.yaml</span></span>
   <span style="color:#606">entrypoints</span>:
     - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">command: ['sleep']</span></span>
       <span style="color:#606">args</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">['infinity']</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>sleep infinity</code> command is added as the entry point of the NodeJS application. This prevents the application from starting at the workspace start phase, allowing the user to start it when needed for testing or debugging purposes.</p>
</div>
<div class="paragraph">
<p>To make it easier for a developer to test the application, add the commands in the devfile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
 <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">minimal-workspace</span></span>
<span style="color:#606">components</span>:
 - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">type: kubernetes</span></span>
   <span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://raw.githubusercontent.com/.../mongo-db.yaml</span></span>
 - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alias: nodejs-app</span></span>
   <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">kubernetes</span></span>
   <span style="color:#606">reference</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">https://raw.githubusercontent.com/.../nodejs-app.yaml</span></span>
   <span style="color:#606">entrypoints</span>:
     - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">command: ['sleep']</span></span>
       <span style="color:#606">args</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">['infinity']</span></span>
<span style="color:#606">commands</span>:
 - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: run</span></span>
   <span style="color:#606">actions</span>:
     - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">type: exec</span></span>
       <span style="color:#606">component</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nodejs-app</span></span>
       <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cd ${CHE_PROJECTS_ROOT}/nodejs-mongo-app/EmployeeDB/ &amp;&amp; npm install &amp;&amp; sed -i -- ''s/localhost/mongo/g'' app.js &amp;&amp; node app.js</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Use this devfile to create and start a workspace with the <code>chectl</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ chectl worspace:start --devfile <em>&lt;devfile-path&gt;</em></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>run</code> command added to the devfile is available as a task in Che-Theia from the command palette. When executed, the command starts the NodeJS application.</p>
</div>
</div>
<div class="sect2">
<h3 id="adding-a-kubernetes-application-to-an-existing-workspace-using-the-dashboard_importing-a-kubernetes-application-into-a-che-workspace">Adding a Kubernetes application to an existing workspace using the dashboard</h3>
<div class="paragraph">
<p>This procedure demonstrates how to modify an existing workspace and import the Kubernetes application using the newly created devfile.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>After the creation of a workspace, use the <strong>Workspace</strong> menu and then the <strong>Configure workspace</strong> icon to manage the workspace.</p>
<div class="imageblock">
<div class="content">
<a class="image" href="../images/workspaces/configure-workspace.png"><img src="../images/workspaces/configure-workspace.png" alt="configure workspace"></a>
</div>
</div>
</li>
<li>
<p>To modify the workspace details, use the <strong>Devfile</strong> tab. The workspace details are displayed in this tab in the devfile format.</p>
<div class="imageblock">
<div class="content">
<a class="image" href="../images/workspaces/configure-workspace-devfile.png"><img src="../images/workspaces/configure-workspace-devfile.png" alt="configure workspace devfile"></a>
</div>
</div>
</li>
<li>
<p>To add a Kubernetes component, use the <strong>Devfile</strong> editor on the dashboard.</p>
</li>
<li>
<p>For the changes to take effect, save the devfile and restart the Che workspace.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="generating-a-devfile-from-an-existing-kubernetes-application_importing-a-kubernetes-application-into-a-che-workspace">Generating a devfile from an existing Kubernetes application</h3>
<div class="paragraph">
<p>This procedure demonstrates how to generate a devfile from an existing Kubernetes application using the <code>chectl</code> tool.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><code>chectl</code> is installed and running</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Use the <code>chectl devfile:generate</code> command to generate a devfile:</p>
<div class="listingblock">
<div class="content">
<pre>$ chectl devfile:generate</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The user can also use the <code>chectl devfile:generate</code> command to generate a devfile from, for example, the <code>NodeJS-MongoDB</code> application.</p>
<div class="paragraph">
<p>The following example generates a devfile that includes the <code>NodeJS</code> component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ chectl devfile:generate --selector="app=nodejs"
apiVersion: 1.0.0
metadata:
  name: chectl-generated
components:
  - type: kubernetes
    alias: app=nodejs
    referenceContent: |
      kind: List
      apiVersion: v1
      metadata:
        name: app=nodejs
      items:
        - apiVersion: apps/v1
          kind: Deployment
          metadata:
            labels:
              app: nodejs
            name: web
(...)</pre>
</div>
</div>
<div class="paragraph">
<p>The NodeJS application YAML definition is included in the devfile, inline, using the <code>referenceContent</code> attribute.</p>
</div>
</li>
<li>
<p>To include support for a language, use the <code>--language</code> parameter:</p>
<div class="listingblock">
<div class="content">
<pre>$ chectl devfile:generate --selector="app=nodejs" --language="typescript"
apiVersion: 1.0.0
metadata:
  name: chectl-generated
components:
  - type: kubernetes
    alias: app=nodejs
    referenceContent: |
      kind: List
      apiVersion: v1
(...)
  - type: chePlugin
    alias: typescript-ls
    id: che-incubator/typescript/latest</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Use the generated devfile to start a Che workspace with <code>chectl</code>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="remotely-accessing-to-che-workspaces_using-developer-environments-workspaces">Remotely accessing Che workspaces</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to remotely access Che workspaces outside of the browser.</p>
</div>
<div class="paragraph">
<p>Che workspaces exist as containers and are by default modified from a browser window. In addition to this, there are the following methods of interacting with a Che workspace:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Opening a command line in the workspace container using the Kubernetes command-line tool, <code>kubectl</code></p>
</li>
<li>
<p>Uploading and downloading files using the <code>kubectl</code> tool</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="remotely-accessing-che-workspaces-using-the-kubernetes-command-line-tool_remote-access-to-che-workspaces">Remotely accessing Che workspaces using the Kubernetes command-line tool</h3>
<div class="paragraph">
<p>To access Che workspaces remotely using Kubernetes command-line tool (<code>kubectl</code>), follow the instructions in this section.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>kubectl</code> tool is used in this section to open a shell and manage files in a Che workspace. Alternatively, it is possible to use the <code>oc</code>  OpenShift command-line tool.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>The kubectl binary from the <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">Kubernetes website</a>.</p>
</li>
<li>
<p>To verify the installation of <code>kubectl</code> using the <code>kubectl version</code> command:</p>
<div class="listingblock">
<div class="content">
<pre>$ kubectl version
Client Version: version.Info{Major:"1", Minor:"15", GitVersion:"v1.15.0", GitCommit:"e8462b5b5dc2584fdcd18e6bcfe9f1e4d970a529", GitTreeState:"clean", BuildDate:"2019-06-19T16:40:16Z", GoVersion:"go1.12.5", Compiler:"gc", Platform:"darwin/amd64"}
Server Version: version.Info{Major:"1", Minor:"15", GitVersion:"v1.15.0", GitCommit:"e8462b5b5dc2584fdcd18e6bcfe9f1e4d970a529", GitTreeState:"clean", BuildDate:"2019-06-19T16:32:14Z", GoVersion:"go1.12.5", Compiler:"gc", Platform:"linux/amd64"}</pre>
</div>
</div>
<div class="paragraph">
<p>If the version is 1.5.0 or higher, you can proceed to the steps below.</p>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Use the <code>exec</code> command to open a remote shell.</p>
</li>
<li>
<p>To find the name of the Kubernetes namespace and pod that runs the Che workspace:</p>
<div class="listingblock">
<div class="content">
<pre>$ kubectl get pod -l che.workspace_id --all-namespaces
NAMESPACE   NAME                                               READY   STATUS    RESTARTS   AGE
che         workspace7b2wemdf3hx7s3ln.maven-74885cf4d5-kf2q4   4/4     Running   0          6m4s</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the example above, the pod name is <code>workspace7b2wemdf3hx7s3ln.maven-74885cf4d5-kf2q4</code>, and the namespace is <code>che</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To find the name of the container:</p>
<div class="listingblock">
<div class="content">
<pre>$ NAMESPACE=che
$ POD=workspace7b2wemdf3hx7s3ln.maven-74885cf4d5-kf2q4
$ kubectl get pod ${POD} -o custom-columns=CONTAINERS:.spec.containers[*].name
CONTAINERS
maven,che-machine-execpau,theia-ide6dj,vscode-javaw92</pre>
</div>
</div>
</li>
<li>
<p>When you have the namespace, pod name, and the name of the container, use the <code>kubectl</code> command to open a remote shell:</p>
<div class="literalblock">
<div class="content">
<pre class="nowrap">$ NAMESPACE=che
$ POD=workspace7b2wemdf3hx7s3ln.maven-74885cf4d5-kf2q4
$ CONTAINER=maven
$ kubectl exec -ti -n ${NAMESPACE} ${POD} -c ${CONTAINER} bash
user@workspace7b2wemdf3hx7s3ln $</pre>
</div>
</div>
</li>
<li>
<p>From the container, execute the <code>build</code> and <code>run</code> commands (as if from the Che workspace terminal):</p>
<div class="listingblock">
<div class="content">
<pre>user@workspace7b2wemdf3hx7s3ln $ mvn clean install
[INFO] Scanning for projects...
(...)</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more about <code>kubectl</code>, see the <a href="https://kubernetes.io/docs/reference/kubectl/overview/">Kubernetes documentation</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="downloading-and-uploading-a-file-to-a-che-workspace-using-the-command-line-interface_remote-access-to-che-workspaces">Downloading and uploading a file to a Che workspace using the command-line interface</h3>
<div class="paragraph">
<p>This procedure describes how to use the <code>kubectl</code> tool to download or upload files remotely from or to an Eclipse Che workspace.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Remote access to the Che workspace you intend to modify. For instructions see <a href="#remotely-accessing-che-workspaces-using-the-kubernetes-command-line-tool_remotely-accessing-che-workspaces">[remotely-accessing-che-workspaces-using-the-kubernetes-command-line-tool_remotely-accessing-che-workspaces]</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To download a local file named <code>downloadme.txt</code> from a workspace container to the current home directory of the user, use the following in the Che remote shell.</p>
<div class="listingblock">
<div class="content">
<pre>$ REMOTE_FILE_PATH=/projects/downloadme.txt
$ NAMESPACE=che
$ POD=workspace7b2wemdf3hx7s3ln.maven-74885cf4d5-kf2q4
$ CONTAINER=maven
$ kubectl cp ${NAMESPACE}/${POD}:${REMOTE_FILE_PATH} ~/downloadme.txt -c ${CONTAINER}</pre>
</div>
</div>
</li>
<li>
<p>To upload a local file named <code>uploadme.txt</code> to a workspace container in the <code>/projects</code> directory:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ LOCAL_FILE_PATH=./uploadme.txt
$ NAMESPACE=che
$ POD=workspace7b2wemdf3hx7s3ln.maven-74885cf4d5-kf2q4
$ CONTAINER=maven
$ kubectl cp ${LOCAL_FILE_PATH} ${NAMESPACE}/${POD}:/projects -c ${CONTAINER}</pre>
</div>
</div>
<div class="paragraph">
<p>Using the steps above, the user can also download and upload folders.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-workspace-from-code-sample_using-developer-environments-workspaces">Creating a workspace from code sample</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to select a workspace, then load a stack and its accompanying sample project.</p>
</div>
<div class="paragraph">
<p>It will also explain how to customize a workspace using the <strong>Dashboard</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Every stack includes a sample codebase, which is defined by the stack&#8217;s devfile. For more information on devfiles, see <a href="#configuring-a-che-workspace-using-a-devfile_using-developer-environments-workspaces">Configuring a Che workspace using a devfile</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<h3 id="prerequisites" class="discrete">Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>You need an OKD (<a href="https://www.okd.io/minishift/">Minishift</a>), OCP, or OSD cluster, if using Che on Openshift.</p>
</li>
<li>
<p>Or, you need a Kubernetes cluster such as <a href="https://github.com/kubernetes/minikube#installation">Minikube</a> to use Che on Kubernetes.</p>
</li>
<li>
<p>To install on Minishift or Minikube, see <a href="che-quick-starts.html#deploying-che-using-chectl">Deploying Che using chectl</a>.</p>
</li>
</ul>
</div>
<h3 id="procedure" class="discrete">Procedure</h3>
<div class="sect3">
<h4 id="accessing-the-dashboard">Accessing the Dashboard</h4>
<div class="paragraph">
<p>The <strong>Dashboard</strong> is accessible on your cluster from a URL like http://<code>che-instance</code>.<code>your.IP.address.here</code>.nip.io/dashboard/.</p>
</div>
<div class="sect4">
<h5 id="minishift">Minishift</h5>
<div class="paragraph">
<p>See <a href="che-quick-starts.html#deploying-che-using-chectl">Deploying Che using chectl</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For versions of <a href="https://github.com/minishift/minishift/releases">Minishift up to 1.34</a>, you need to apply a small change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>oc set env dc/che CHE_WORKSPACE_PLUGIN__REGISTRY__URL=https://che-plugin-registry.openshift.io/v3</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Next, log into your console at https://<code>your.IP.address.here</code>:8443/console/.</p>
</li>
<li>
<p>From there, select the mini-che project:</p>
<div class="ulist">
<ul>
<li>
<p>https://<code>your.IP.address.here</code>:8443/console/project/mini-che/overview</p>
</li>
</ul>
</div>
</li>
<li>
<p>Then click through to the mini-che route link, which will load the <strong>Dashboard</strong> by default and prompt you to create a workspace.</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://che-che" class="bare">http://che-che</a>.<code>your.IP.address.here</code>.nip.io/</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="ocp-and-osd">OCP and OSD</h5>
<div class="paragraph">
<p>If using OCP or OSD, talk to your administrator to obtain the URL for the che instance.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="selecting-a-stack">Selecting a stack</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When the <strong>Dashboard</strong> opens, click the link in the left navigation panel for <strong>Workspaces</strong>, if it&#8217;s not already open.</p>
</li>
<li>
<p>Choose a stack from the list.</p>
</li>
<li>
<p>Name your workspace, if you don&#8217;t like the default-generated name.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/select-workpace.png" alt="Select a stack from the list">
</div>
</div>
</div>
<div class="sect3">
<h4 id="viewing-the-compute-resource-limits">Viewing the compute resource limits</h4>
<div class="paragraph">
<p>The memory needed by the stack is pre-calculated and displayed on the stack description line. Changing the memory requirements is only possible <a href="#configure-devfile">from the devfile</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="start-the-workspace">Start the workspace</h4>
<div class="paragraph">
<p>There are two ways to start the workspace:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Simple start: just push the <strong>Create &amp; Open</strong> button at the top or bottom of the form:</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/create-and-open.png" alt="Create and Open">
</div>
</div>
</li>
<li>
<p>Advanced start: from the top of the page, click the down arrow next to the <strong>Create &amp; Open</strong> button, then select the menu item below to edit your workspace&#8217;s configuration.</p>
<div class="paragraph">
<p>This will allow you to make further configuration before starting the workspace.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/create-and-edit.png" alt="Create and Edit">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="change-the-workspace-configuration">Change the workspace configuration</h4>
<div class="paragraph">
<p>If you chose the second option, you&#8217;ll be able to configure the workspace&#8217;s YAML, among other tasks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the <strong>Overview</strong> tab, quickly rename a workspace, if you forgot to do that when creating it. Or, also toggle ephemeral mode, or export your workspace config to a file or private cloud. This is also one of serveral places from which you can delete a workspace.</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/workspace-config-overview.png" alt="Worksapce configuration overview">
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the <strong>Projects</strong> tab, you can add more projects to an existing workspace:</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/workspace-config-projects.png" alt="Add projects to workspace">
</div>
</div>
</li>
<li>
<p>From the <strong>Plugins</strong> tab, enable or disable workspace plugins. For example, start with a generic Java-based stack, then later add support for Node or Python.</p>
</li>
<li>
<p>From the <strong>Editors</strong> tab, enable or disable workspace editors. For example, to switch to the Che 6 editor, select the GWT IDE. The Che 7 editor is based on Theia.</p>
</li>
</ol>
</div>
<div id="configure-devfile" class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>From the <strong>Devfile</strong> tab, edit the workspace&#8217;s YAML configuration. This is also where you can load a custom container, if you previously built one and pushed it to some container registry.  You can also add commands and sample projects, if you prefer to enter code than to click buttons.</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/workspace-config-yaml.png" alt="YAML configuration">
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example, to add a project into the workspace, add or edit the following section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>projects:
  - name: che
    source:
      type: git
      location: 'https://github.com/eclipse/che.git'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="running-a-workspace">Running a workspace</h4>
<div class="paragraph">
<p>There are multiple ways to run a workspace:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From the <strong>Run</strong>  button in the top right corner of the Workspace configuration page, which will start the workspace but will NOT switch to it</p>
</li>
<li>
<p>From the <strong>Open</strong> button in the top right corner of the Workspace configuration page, which will both start the workspace and launch it in your browser</p>
</li>
<li>
<p>From the list of <strong>Recent Workspaces</strong> on the left navigation panel, right-click a non-running workspace to start it, or right-click a running workspace to stop it.</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/run-from-recent-workspaces.png" alt="Run from Recent Workspaces">
</div>
</div>
</li>
</ul>
</div>
<h3 id="additional-resources" class="discrete">Additional resources</h3>
<div class="ulist">
<ul>
<li>
<p><a href="che-quick-starts.html#deploying-che-using-chectl">Deploying Che using chectl</a></p>
</li>
<li>
<p><a href="https://docs.okd.io/latest/minishift/getting-started/preparing-to-install.html">Minishift installation</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/minikube#installation">Minikube installation</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-workspace-by-importing-source-code-of-your-project_using-developer-environments-workspaces">Creating a workspace by importing the source code of your project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section is about how to create a new workspace to edit an existing codebase.</p>
</div>
<div class="paragraph">
<p>There are 2 ways to do that <strong>before</strong> starting a workspace:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#configure-devfile">Select a stack from the <strong>Dashboard</strong>, then change the devfile to include your project</a></p>
</li>
<li>
<p><a href="#configuring-a-che-workspace-using-a-devfile_end-user-tasks">Add a devfile to a git repository and start the workspace using chectl or a factory</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create a new workspace to edit an existing codebase, use one of the following three methods <strong>after</strong> you have started the workspace:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#importing-from-the-user-dashboard-into-an-existing-workspace">Import from the <strong>Dashboard</strong> into an existing workspace</a></p>
</li>
<li>
<p><a href="#importing-to-a-running-workspace-with-git-clone-command">Import to a running workspace with git clone command</a></p>
</li>
<li>
<p><a href="#importing-to-a-running-workspace-with-git-clone-in-a-terminal">Import to a running workspace with git clone in a terminal</a></p>
</li>
<li>
<p>Import a workspace from the <strong>Dashboard</strong> into an existing workspace. For details, see xref:#importing-from-the-user-dashboard-into-an-existing-workspace.</p>
</li>
<li>
<p>Import to a running workspace using the <code>git clone</code> command. For details, see xref:#importing-to-a-running-workspace-with-git-clone-in-a-terminal.</p>
</li>
<li>
<p>Import to a running workspace using the <code>git clone</code> command in a terminal. For details, see xref:#importing-to-a-running-workspace-with-git-clone-in-a-terminal.</p>
<h3 id="prerequisites-2" class="discrete">Prerequisites</h3>
</li>
<li>
<p>You need an OKD, OCP, or OSD cluster, if using Che on Openshift. See below for use of <a href="https://www.okd.io/minishift/">Minishift</a> (OKD).</p>
</li>
<li>
<p>Or, you can use a Kubernetes cluster such as <a href="https://github.com/kubernetes/minikube#installation">Minikube</a>.</p>
</li>
<li>
<p>To install on Minishift or Minikube, see <a href="che-quick-starts.html#deploying-che-using-chectl">Deploying Che using chectl</a>.</p>
</li>
<li>
<p>You need to have created a workspace with plugins related to your development environment.</p>
</li>
</ul>
</div>
<h3 id="importing-from-the-dashboard-into-an-existing-workspace" class="discrete">Importing from the Dashboard into an existing workspace</h3>
<div class="paragraph">
<p>There are at least two ways to import a project via the <strong>Dashboard</strong>.</p>
</div>
<div class="paragraph">
<p>From the <strong>Dashboard</strong>, select Workspaces, then select your workspace by clicking on its name, or use the gear icon. The former will link you to the workspace&#8217;s <strong>Overview</strong> tab, while the latter will link to the <strong>Devfile</strong> tab where you can enter your own YAML configuration.
You can import a project using the <strong>Dashboard</strong> in one of the following two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>On the <strong>Dashboard</strong>, click <strong>Workspaces</strong>. Then, click the required workspace. The <strong>Overview</strong> tab displays showing the overview of the workspace.</p>
</li>
<li>
<p>On the <strong>Dashboard</strong>, click <strong>Workspaces</strong>. Then, click the gear icon next to the required workspace. The <strong>Devfile</strong> tab displays allowing you to enter the YAML configuration.
In either case, click the <strong>Projects</strong> tab next.</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the <strong>Projects</strong> tab.</p>
</li>
<li>
<p>Click <strong>Add Project</strong>. You can then import a sample project, create a blank project, import from a Git project, or import from a zip file.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/workspace-config-projects.png" alt="Add projects to workspace">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can add a project to a non-running workspace, but you must start the workspace to delete it.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="creating-a-new-repository">Creating a new repository</h4>
<div class="paragraph">
<p>To add a blank project, take the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Type a name and a description in the <strong>Name</strong> and <strong>Description</strong> fields.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/add-blank-project.png" alt="Add blank project">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Open</strong> to open your workspace.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/open-blank-project.png" alt="Your empty project">
</div>
</div>
</div>
<div class="sect3">
<h4 id="edit-an-existing-repository">Edit an existing repository</h4>
<div class="paragraph">
<p>To edit an existing repository, choose the git project or zip file, and Che will load it into your workspace.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/add-git-project.png" alt="Add existing git project">
</div>
</div>
<div class="paragraph">
<p>Next, open your workspace by clicking the green <strong>Open</strong> button.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/open-git-project.png" alt="Your git project">
</div>
</div>
</div>
<div class="sect3">
<h4 id="editing-the-commands-after-importing-a-project">Editing the commands after importing a project</h4>
<div class="paragraph">
<p>After you have a project in your workspace, you can add commands to it. Adding commands to your projects allows you to run, debug, or launch your application in a browser.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To add commands to the project, open the workspace configuration in the <strong>Dashboard</strong>, then select the <strong>Devfile</strong> tab:</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/workspace-config-yaml.png" alt="Add commands to workspace">
</div>
</div>
</li>
<li>
<p>Open the workspace.</p>
</li>
<li>
<p>To run a command, select <strong>Terminal</strong> &gt; <strong>Run Task&#8230;&#8203;</strong> from the main menu.</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/run-command.png" alt="Run task">
</div>
</div>
</li>
<li>
<p>To configure commands, select <strong>Terminal</strong> &gt; <strong>Configure Tasks&#8230;&#8203;</strong> from the main menu.</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/configure-command.png" alt="Configure tasks">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="importing-to-a-running-workspace-using-the-git-clone-command">Importing to a running workspace using the <strong>Git: Clone&#8230;&#8203;</strong> command</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start a workspace, then use the <strong>Git: Clone&#8230;&#8203;</strong> command from the command palette or the Welcome screen to import a project to a running workspace.</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/welcome.png" alt="Welcome screen">
</div>
</div>
</li>
<li>
<p>Open the command palette with <code>F1</code> or <code>CTRL-SHIFT-P</code>, or from the link in the Welcome screen.</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/git-clone-command.png" alt="Invoke git clone command">
</div>
</div>
</li>
<li>
<p>Enter the path to the project you want to clone.</p>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/git-clone-command-2.png" alt="Configure git clone command">
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="importing-to-a-running-workspace-with-git-clone-in-a-terminal">Importing to a running workspace with <code>git clone</code> in a terminal</h3>
<div class="paragraph">
<p>In addition to the approaches above, you can also start a workspace, open a <strong>Terminal</strong>, and type <code>git clone</code> to pull code.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/workspaces/git-clone-terminal.png" alt="Run git clone in a terminal">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Importing or deleting workspace projects in the terminal does not update workspace configuration, and the change is not reflected in the <strong>Project</strong> and <strong>Devfile</strong> tabs in the dashboard.</p>
</div>
<div class="paragraph">
<p>Similarly, if you add a project via the <strong>Dashboard</strong>, then delete it with <code>rm -fr myproject</code>, it may still appear in the <strong>Projects</strong> or <strong>Devfile</strong> tab.</p>
</div>
</td>
</tr>
</table>
</div>
<h3 id="additional-resources-2" class="discrete">Additional resources</h3>
<div class="ulist">
<ul>
<li>
<p><a href="che-quick-starts.html#deploying-che-using-chectl">Deploying Che using chectl</a></p>
</li>
<li>
<p><a href="https://docs.okd.io/latest/minishift/getting-started/preparing-to-install.html">Minishift installation</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/minikube#installation">Minikube installation</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>

    <div class="tags">
        
        <b>Tags: </b>
        
        
        
    </div>

<!-- 
 -->

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
                    Eclipse Che - Documentation <br/>
                    Site last generated: Jul 31, 2019 <br/>
                    <hr>
                    <a href="http://www.eclipse.org" target="_blank">Eclipse Foundation</a><br/>
                    <a href="http://www.eclipse.org/legal/privacy.php" target="_blank">Privacy Policy</a><br/>
                    <a href="http://www.eclipse.org/legal/termsofuse.php" target="_blank">Terms of Use</a><br/>
                    <a href="https://www.eclipse.org/legal/epl-2.0/" target="_blank">Eclipse Public License</a><br/>
                    <a href="http://www.eclipse.org/legal" target="_blank">Legal Resources</a><br/>
                </div>
            </div>
</footer>




    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
