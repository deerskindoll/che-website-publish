<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=",  ">
<title>Mounting a secret as a file or an environment variable into a workspace container | Eclipse Che Documentation</title>
<link rel="stylesheet" href="/che/docs/css/syntax.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" crossorigin="anonymous">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/che/docs/css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="/che/docs/css/customstyles.css">
<link rel="stylesheet" href="/che/docs/css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="/che/docs/css/theme-che.css">


    <link rel="stylesheet" href="/che/docs/css/coderay.css" media="screen" type="text/css">
    <link rel="stylesheet" href="/che/docs/css/asciidoc.css" type="text/css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" crossorigin="anonymous"></script>
<script src="/che/docs/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js" crossorigin="anonymous"></script>
<script src="/che/docs/js/toc.js"></script>
<script src="/che/docs/js/customscripts.js"></script>

<link rel="shortcut icon" href="/che/docs/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="che" href="/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/che/docs/">&nbsp;<span class="projectTitle"> Eclipse Che Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://medium.com/eclipse-che-blog/" target="_blank">Blog</a></li>
                
                
                
                <li><a href="http://che.openshift.io/f?url=https://github.com/eclipse/che-docs" target="_blank">Contribute</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Support<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/eclipse/che/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc+label%3Akind%2Fbug" target="_blank">Known Bugs</a></li>
                        
                        
                        
                        <li><a href="https://github.com/eclipse/che/issues/new" target="_blank">File an Issue</a></li>
                        
                        
                        
                        <li><a href="https://stackoverflow.com/questions/tagged/eclipse-che" target="_blank">Che on StackOverflow</a></li>
                        
                        
                    </ul>
                </li>
                
                
                <!-- 
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:?subject= feedback&body=I have some feedback about the Mounting a secret as a file or an environment variable into a workspace container page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>
 -->
		
                <!--comment out this block if you want to hide search-->
                <!--
                <li>
                    
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/che/docs/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: "/che/docs/search.json",
                                searchResultTemplate: '<li><a href="{url}" title="Mounting a secret as a file or an environment variable into a workspace container">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    
                </li>
                -->
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle"> </li>
  
  <div class="sidebarSubtitle">Overview</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/introduction-to-eclipse-che">Introduction to Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/che-glossary">Che glossary</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che quick-starts</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-quick-starts">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/3-minutes-to-che">3 minutes to Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-the-chectl-management-tool">Using the chectl management tool</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/running-che-locally">Running Che locally</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-openshift-3-using-the-operator">Installing Che on OpenShift 3</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-openshift-4-using-operatorhub">Installing Che on OpenShift 4</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-aws">Installing Che on AWS</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-google-cloud-platform">Installing Che on Google Cloud</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-on-microsoft-azure">Installing Che on Microsoft Azure</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/accessing-che-from-openshift-developer-perspective">Accessing Che from OpenShift Developer Perspective</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/hosted-che">Hosted Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che architecture</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-architecture">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/high-level-che-architecture">High-level Che architecture</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-workspace-controller">Che workspace controller</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-workspaces-architecture">Che workspaces architecture</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">End-user Guide</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/navigating-che-using-the-dashboard">Navigating Che: dashboard</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che-Theia IDE basics</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-theia-ide-basics">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/defining-custom-commands-for-che-theia">Defining custom commands for Che-Theia</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/version-control">Version Control</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-theia-troubleshooting">Che-Theia Troubleshooting</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Using developer workspaces</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/workspaces-overview">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-a-workspace-using-a-devfile">Configuring a workspace using a devfile</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/making-a-workspace-portable-using-a-devfile">Making a workspace portable using a devfile</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-and-configuring-a-new-workspace">Creating and configuring a new workspace</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/importing-a-kubernetes-application-into-a-workspace">Importing a Kubernetes application into a workspace</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/remotely-accessing-workspaces">Remotely accessing workspaces</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-a-workspace-from-code-sample">Creating a workspace from code sample</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-a-workspace-by-importing-source-code-of-a-project">Creating a workspace by importing source code of a project</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-workspace-exposure-strategies">Configuring workspace exposure strategies</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/mounting-a-secret-as-a-file-or-an-environment-variable-into-a-workspace-container">Mounting a secret as a file or an environment variable into a workspace container</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Customizing developer environments</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/customizing-developer-environments">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/what-is-a-che-theia-plug-in">What is a Che-Theia plug-in</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-alternative-ides-in-che">Using alternative IDEs in Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/adding-tools-to-che-after-creating-a-workspace">Adding tools to Che after creating a workspace</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Configuring OAuth authorization</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/configuring-oauth-authorization">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-github-oauth">Configuring GitHub OAuth</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-openshift-oauth">Configuring OpenShift OAuth</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Using artifact repositories in a restricted environment</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/using-artifact-repositories-in-a-restricted-environment">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-maven-artifact-repositories">Using Maven artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-gradle-artifact-repositories">Using Gradle artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-python-artifact-repositories">Using Python artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-go-artifact-repositories">Using Go artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-nuget-artifact-repositories">Using NuGet artifact repositories</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-npm-artifact-repositories">Using npm artifact repositories</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/troubleshooting-for-che-end-users">Troubleshooting for Che end users</a>
      
      <ul>
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Installation Guide</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/supported-platforms">Supported platforms</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Configuring Che</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/configuring-che">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-the-che-installation">Configuring the Che installation</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/advanced-configuration-options-for-the-che-server-component">Advanced configuration options for Che server</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-namespace-strategies">Configuring namespace strategies</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/deploying-che-with-support-for-git-repositories-with-self-signed-certificates">Deploying Che with support for Git repositories with self-signed certificates</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-che-using-storage-classes">Installing Che using storage classes</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/importing-tls-certificates-to-che-server-java-truststore">Importing TLS certificates to Che server Java truststore</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/installing-che-in-tls-mode-with-self-signed-certificates">Installing Che in TLS mode with self-signed certificates</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/installing-che-in-restricted-environment">Installing Che in restricted environment</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/upgrading-che">Upgrading Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/uninstalling-che">Uninstalling Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Administration Guide</div>
  
  
  <li>
      
      <a href="#" class="expandable">Customizing devfile and plug-in registries</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/customizing-the-devfile-and-plug-in-registries">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/building-and-running-a-custom-registry-image">Building and running a custom registry image</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/including-the-plug-in-binaries-in-the-registry-image">Including the plug-in binaries in the registry image</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/editing-a-devfile-and-plug-in-at-runtime">Editing a devfile and plug-in at runtime</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/using-a-visual-studio-code-extension-in-che">Using a VS Code extension in Che</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Retrieving Che logs</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/retrieving-che-logs">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-kubernetes-events">Accessing Kubernetes events on OpenShift</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-operator-events">Viewing the Operator events on OpenShift</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-che-server-logs">Viewing Che server logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-external-service-logs">Viewing external service logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-che-workspaces-logs">Viewing Che workspaces logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/viewing-plug-in-broker-logs">Viewing Plug-in broker logs</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/collecting-logs-using-chectl">Collecting logs using chectl</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/monitoring-che">Monitoring Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/tracing-che">Tracing Che</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Managing users</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/managing-users">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/configuring-authorization">Configuring authorization</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/removing-user-data">Removing user data</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Securing Che</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/securing-che">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/authenticating-users">Authenticating users</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/authorizing-users">Authorizing users</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Backup and disaster recovery</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/backup-and-disaster-recovery">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/external-database-setup">External database setup</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/persistent-volumes-backups">Persistent Volumes backups</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/calculating-che-resource-requirements">Calculating Che resource requirements</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/caching-images-for-faster-workspace-start">Caching images for faster workspace start</a>
      
      <ul>
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Contributor Guide</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/branding-che-theia">Branding Che-Theia</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/developing-che-theia-plug-ins">Developing Che-Theia plug-ins</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/testing-che-theia-plug-ins">Testing Che-Theia plug-ins</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/publishing-che-theia-plug-ins">Publishing Che-Theia plug-ins</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/adding-support-for-a-new-language">Adding support for a new language</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/adding-support-for-a-new-debugger">Adding support for a new debugger</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">Che extensibility reference</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/che-extensibility-reference">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-extension-points">Che extension points</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/che-theia-plug-in-api">Che-Theia plug-in API</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/debug-adapter-protocol">Debug Adapter Protocol</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/language-server-protocol">Language Server Protocol</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
  <div class="sidebarSubtitle">Extensions</div>
  
  
  <li>
      
      <a href="/che/docs/che-7/eclipse-che4z">Eclipse Che4z</a>
      
      <ul>
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="#" class="expandable">OpenShift Connector</a>
      
      <ul>
          
          
          
          <li><a href="/che/docs/che-7/openshift-connector-overview">Overview</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/features-of-openshift-connector">Features of OpenShift Connector</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/installing-openshift-connector-in-eclipse-che">Installing OpenShift Connector in Eclipse Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/authenticating-with-openshift-connector-from-eclipse-che">Authenticating with OpenShift Connector from Eclipse Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/creating-components-with-openshift-connector-in-eclipse-che">Creating Components with OpenShift Connector in Eclipse Che</a></li>
          
          
          
          
          
          
          <li><a href="/che/docs/che-7/connecting-source-code-from-github-to-a-openshift-component-using-openshift-connector">Connecting source code from GitHub to a OpenShift Component</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      
      <a href="/che/docs/che-7/telemetry">Telemetry</a>
      
      <ul>
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block: -->
<!--         <p class="external">
             <a href="#" id="collapseAll">Collapse all</a> | <a href="#" id="expandAll">Expand all</a>
         </p>-->
         
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>

            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Mounting a secret as a file or an environment variable into a workspace container</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.
$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });
/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top
  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<div id="toc"></div>

    


    <!-- 


     -->

  <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Secrets are Kubernetes objects that store sensitive data such as user names, passwords, authentication tokens, and configurations in an encrypted form.</p>
</div>
<div class="paragraph">
<p>Users can mount a secret that contains sensitive data in a workspace container. This reapplies the stored data from the secret automatically for every newly created workspace. As a result, the user does not have to provide these credentials and configuration settings manually.</p>
</div>
<div class="paragraph">
<p>The following section describes how to automatically mount a Kubernetes secret in a workspace container and create permanent mount points for components such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven configuration, the <code>settings.xml</code> file</p>
</li>
<li>
<p>SSH key pairs</p>
</li>
<li>
<p>AWS authorization tokens</p>
</li>
<li>
<p>Git credentials store file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A Kubernetes secret can be mounted into a workspace container as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A file - This creates automatically mounted Maven settings that will be applied to every new workspace with Maven capabilities.</p>
</li>
<li>
<p>An environment variable - This uses SSH key pairs and AWS authorization tokens for automatic authentication.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
SSH key pairs can also be mounted as a file, but this format is primarily aimed at the settings of the Maven configuration.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The mounting process uses the standard Kubernetes mounting mechanism, but it requires additional annotations and labeling for a proper bound of a secret with the required Che workspace container.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mounting-a-secret-as-a-file-into-a-workspace-container_mounting-a-secret-as-a-file-or-an-environment-variable-into-a-workspace-container">Mounting a secret as a file into a workspace container</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
On Kubernetes older than v1.13 and OpenShift older than 4, secrets mounted as file overrides volume mounts defined in the devfile.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This section describes how to mount a secret from the user&#8217;s namespace as a file in single-workspace or multiple-workspace containers of Che.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A running instance of Eclipse Che. To install an instance of Eclipse Che, see <a href="/che/docs/che-7/che-quick-starts/">Che 'quick-starts'</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a new Kubernetes secret in the Kubernetes namespace where a Che workspace will be created.</p>
<div class="ulist">
<ul>
<li>
<p>The labels of the secret that is about to be created must match the set of labels configured in <code>che.workspace.provision.secret.labels</code> property of Che. The default labels are:</p>
</li>
<li>
<p><code>app.kubernetes.io/part-of: che.eclipse.org</code></p>
</li>
<li>
<p><code>app.kubernetes.io/component: workspace-secret</code>:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that the following example describes variations in the usage of the <code>target-container</code> annotation in versions 7.14 and 7.15 of Eclipse Che.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Secret</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mvn-settings-secret</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">app.kubernetes.io/part-of</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">che.eclipse.org</span></span>
    <span style="color:#606">app.kubernetes.io/component</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">workspace-secret</span></span>
<span style="color:#f8f;background:#505"><span style="color:#f4f">...</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Annotations must indicate the given secret is mounted as a file, provide the mount path, and, optionally, specify the name of the container in which the secret is mounted. If there is no target-container annotation, the secret will be mounted into all user containers of the Che workspace, but this is applicable <strong><em>only for the Che version 7.14</em></strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Secret</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mvn-settings-secret</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">che.eclipse.org/target-container</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">maven</span></span>
    <span style="color:#606">che.eclipse.org/mount-path</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/home/user/.m2/</span></span>
    <span style="color:#606">che.eclipse.org/mount-as</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">file</span></span>
  <span style="color:#606">labels</span>:
<span style="color:#f8f;background:#505"><span style="color:#f4f">...</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>Since the Che version 7.15</em></strong>, the <code>target-container</code> annotation is deprecated and <code>automount-workspace-secret</code> annotation with Boolean values is introduced. Its purpose is to define the default secret mounting behavior, with the ability to be overridden in a devfile. The <code>true</code> value enables the automatic mounting into all workspace containers. In contrast, the <code>false</code> value disables the mounting process until it is explicitly requested in a devfile component using the <code>automountWorkspaceSecrets:true</code> property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Secret</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mvn-settings-secret</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">che.eclipse.org/automount-workspace-secret</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'true'</span></span>
    <span style="color:#606">che.eclipse.org/mount-path</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/home/user/.m2/</span></span>
    <span style="color:#606">che.eclipse.org/mount-as</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">file</span></span>
  <span style="color:#606">labels</span>:
<span style="color:#f8f;background:#505"><span style="color:#f4f">...</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Data of the Kubernetes secret may contain several items, whose names must match the desired file name mounted into the container.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Secret</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mvn-settings-secret</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">app.kubernetes.io/part-of</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">che.eclipse.org</span></span>
    <span style="color:#606">app.kubernetes.io/component</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">workspace-secret</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">che.eclipse.org/automount-workspace-secret</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'true'</span></span>
    <span style="color:#606">che.eclipse.org/mount-path</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/home/user/.m2/</span></span>
    <span style="color:#606">che.eclipse.org/mount-as</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">file</span></span>
<span style="color:#606">data</span>:
  <span style="color:#606">settings.xml</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20"><em>&lt;base64 encoded data content here&gt;</em></span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This results in a file named <code>settings.xml</code> being mounted at the <code>/home/user/.m2/</code> path of all workspace containers.</p>
</div>
<div class="paragraph">
<p>The secret-s mount path can be overridden for specific components of the workspace using devfile. To change mount path, an additional volume should be declared in a component of the devfile, with name matching overridden secret name, and desired mount path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1.0.0</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#F00;background-color:#FAA">...</span>
<span style="color:#606">components</span>:
 - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">type: dockerimage</span></span>
   <span style="color:#606">alias</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">maven</span></span>
   <span style="color:#606">image</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">maven:3.11</span></span>
   <span style="color:#606">volumes</span>:
     - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: &lt;secret-name&gt;</span></span>
       <span style="color:#606">containerPath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/my/new/path</span></span>
   <span style="color:#F00;background-color:#FAA">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that for this kind of overrides, components must declare an alias to be able to distinguish containers which belong to them and apply override path exclusively for those containers.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mounting-a-secret-as-an-environment-variable-into-a-workspace-container_mounting-a-secret-as-a-file-or-an-environment-variable-into-a-workspace-container">Mounting a secret as an environment variable into a workspace container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following section describes how to mount a Kubernetes secret from the user’s namespace as an environment variable, or variables, into single-workspace or multiple-workspace containers of Che.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A running instance of Eclipse Che. To install an instance of Eclipse Che, see <a href="/che/docs/che-7/che-quick-starts/">Che 'quick-starts'</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a new Kubernetes secret in the k8s namespace where a Che workspace will be created.</p>
<div class="ulist">
<ul>
<li>
<p>The labels of the secret that is about to be created must match the set of labels configured in <code>che.workspace.provision.secret.labels</code> property of Che. By default, it is a set of two labels:</p>
</li>
<li>
<p><code>app.kubernetes.io/part-of: che.eclipse.org</code></p>
</li>
<li>
<p><code>app.kubernetes.io/component: workspace-secret</code>:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that the following example describes variations in the usage of the <code>target-container</code> annotation in versions 7.14 and 7.15 of Eclipse Che.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Secret</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mvn-settings-secret</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">app.kubernetes.io/part-of</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">che.eclipse.org</span></span>
    <span style="color:#606">app.kubernetes.io/component</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">workspace-secret</span></span>
<span style="color:#f8f;background:#505"><span style="color:#f4f">...</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Annotations must indicate that the given secret is mounted as an environment variable, provides variable names, and optionally, specifies the container name where this mount will be applied. If there is no target-container annotation defined, the secret will be mounted into all user containers of the Che workspace, but this is applicable <strong><em>only for the Che version 7.14</em></strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Secret</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mvn-settings-secret</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">che.eclipse.org/target-container</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">maven</span></span>
    <span style="color:#606">che.eclipse.org/env-name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">FOO_ENV</span></span>
    <span style="color:#606">che.eclipse.org/mount-as</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">env</span></span>
  <span style="color:#606">labels</span>:
   <span style="color:#F00;background-color:#FAA">...</span>
<span style="color:#606">data</span>:
  <span style="color:#606">mykey</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvalue</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This results in the environment variable named <code>FOO_ENV</code> and the value <code>myvalue</code> being provisioned into the container named <code>maven</code>.</p>
</div>
<div class="paragraph">
<p><strong><em>Since the Che version 7.15</em></strong>, the <code>target-container</code> annotation is deprecated and <code>automount-workspace-secret</code> annotation with Boolean values is introduced. Its purpose is to define the default secret mounting behavior, with the ability to be overridden in a devfile. The <code>true</code> value enables the automatic mounting into all workspace containers. In contrast, the <code>false</code> value disables the mounting process until it is explicitly requested in a devfile component using the <code>automountWorkspaceSecrets:true</code> property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Secret</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mvn-settings-secret</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">che.eclipse.org/automount-workspace-secret</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'true'</span></span>
    <span style="color:#606">che.eclipse.org/env-name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">FOO_ENV</span></span>
    <span style="color:#606">che.eclipse.org/mount-as</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">env</span></span>
  <span style="color:#606">labels</span>:
   <span style="color:#F00;background-color:#FAA">...</span>
<span style="color:#606">data</span>:
  <span style="color:#606">mykey</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvalue</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This results in the environment variable named <code>FOO_ENV</code> and the value <code>myvalue</code> being provisioned into all workspace containers.</p>
</div>
<div class="paragraph">
<p>If the secret provides more than one data item, the environment variable name must be provided for each of the data keys as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Secret</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mvn-settings-secret</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">che.eclipse.org/automount-workspace-secret</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'true'</span></span>
    <span style="color:#606">che.eclipse.org/mount-as</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">env</span></span>
    <span style="color:#606">che.eclipse.org/mykey_env-name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">FOO_ENV</span></span>
    <span style="color:#606">che.eclipse.org/otherkey_env-name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">OTHER_ENV</span></span>
  <span style="color:#606">labels</span>:
   <span style="color:#F00;background-color:#FAA">...</span>
<span style="color:#606">data</span>:
  <span style="color:#606">mykey</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">myvalue</span></span>
  <span style="color:#606">otherkey</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">othervalue</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This results in two environment variables with names <code>FOO_ENV</code>, <code>OTHER_ENV</code>, and values <code>myvalue</code> and <code>othervalue</code>, being provisioned into all workpsace containers.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The maximum length of annotation names in a Kubernetes secret is 63 characters, where 9 characters are reserved for a prefix that ends with <code>/</code>. This acts as a restriction for the maximum length of the key that can be used for the secret.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mounting-a-git-credential-store-into-a-workspace-container_mounting-a-secret-as-a-file-or-an-environment-variable-into-a-workspace-container">Mounting a git credetials store into a workspace container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to mount git credetials store as secret from the user&#8217;s namespace into the file in single-workspace or multiple-workspace containers of Che.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>A running instance of Eclipse Che. To install an instance of Eclipse Che, see <a href="/che/docs/che-7/che-quick-starts/">Che 'quick-starts'</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Prepare git credential file in format <a href="https://git-scm.com/docs/git-credential-store#_storage_format" class="bare">https://git-scm.com/docs/git-credential-store#_storage_format</a>.</p>
</li>
<li>
<p>Encode content of the file to the base64 format.</p>
</li>
<li>
<p>Create a new Kubernetes secret in the Kubernetes namespace where a Che workspace will be created.</p>
<div class="ulist">
<ul>
<li>
<p>The labels of the secret that is about to be created must match the set of labels configured in <code>che.workspace.provision.secret.labels</code> property of Che. The default labels are:</p>
</li>
<li>
<p><code>app.kubernetes.io/part-of: che.eclipse.org</code></p>
</li>
<li>
<p><code>app.kubernetes.io/component: workspace-secret</code>:</p>
<div class="listingblock">
<div class="title">Example:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Secret</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">git-credentials-secret</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">app.kubernetes.io/part-of</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">che.eclipse.org</span></span>
    <span style="color:#606">app.kubernetes.io/component</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">workspace-secret</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">che.eclipse.org/automount-workspace-secret</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'true'</span></span>
    <span style="color:#606">che.eclipse.org/mount-path</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/home/theia/.git-credentials</span></span>
    <span style="color:#606">che.eclipse.org/mount-as</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">file</span></span>
    <span style="color:#606">che.eclipse.org/git-credential</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">'true'</span></span>
<span style="color:#606">data</span>:
  <span style="color:#606">credentials</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">aHR0cHM6Ly91c2VyOnBhc3NAZXhhbXBsZS5jb20K</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Content of the credential field has to be bas64 encoded to avoid collision with special characters in password.
This results in a file named <code>credentials</code> being mounted at the /home/theia/.git-credentials path of all workspace containers.
Also, the system configuration of git would be linked to the mounted file.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-use-of-annotations-in-the-process-of-mounting-a-secret-into-a-workspace-container_mounting-a-secret-as-a-file-or-an-environment-variable-into-a-workspace-container">The use of annotations in the process of mounting a secret into a workspace container</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kubernetes annotations and labels are tools used by libraries, tools, and other clients, to attach arbitrary non-identifying metadata to Kubernetes native objects.</p>
</div>
<div class="paragraph">
<p>Labels select objects and connect them to a collection that satisfies certain conditions, where annotations are used for non-identifying information that is not used by Kubernetes objects internally.</p>
</div>
<div class="paragraph">
<p>This section describes Kubernetes annotation values used in the process of Kubernetes secret mounting in a Che workspace.</p>
</div>
<div class="paragraph">
<p>Annotations must contain items that help identify the proper mounting configuration. These items are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>che.eclipse.org/target-container</code>: <strong><em>Valid till the version 7.14</em></strong>. The name of the mounting container. If the name is not defined, the secret mounts into all user&#8217;s containers of the Che workspace.</p>
</li>
<li>
<p><code>che.eclipse.org/automount-workspace-secret</code>: <strong><em>Introduced in the version 7.15</em></strong>. The main mount selector. When set to <code>true</code>, the secret mounts into all user&#8217;s containers of the Che workspace. When set to <code>false</code>, the secret does not mount into containers by default. The value of this attribute can be overridden in devfile components, using the <code>automountWorkspaceSecrets</code> boolean property that gives more flexibility to workspace owners. This property requires an <code>alias</code> to be defined for the component that uses it.</p>
</li>
<li>
<p><code>che.eclipse.org/env-name</code>: The name of the environment variable that is used to mount a secret.</p>
</li>
<li>
<p><code>che.eclipse.org/mount-as</code>: This item describes if a secret will be mounted as an environmental variable or a file. Options: <code>env</code> or <code>file</code>.</p>
</li>
<li>
<p><code>che.eclipse.org/<em>&lt;mykeyName&gt;</em>-env-name: FOO_ENV</code>: The name of the environment variable used when data contains multiple items. <code>mykeyName</code> is used as an example.</p>
</li>
<li>
<p><code>che.eclipse.org/git-credential: 'true'</code>: The flag indicates that the secret contains git credential file.</p>
</li>
</ul>
</div>
</div>
</div>

    <div class="tags">
        
        <b>Tags: </b>
        
        
        
    </div>

<!-- 
 -->

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
                    Eclipse Che - Documentation <br/>
                    Site last generated: Aug 3, 2020 <br/>
                    <hr>
                    <a href="http://www.eclipse.org" target="_blank">Eclipse Foundation</a><br/>
                    <a href="http://www.eclipse.org/legal/privacy.php" target="_blank">Privacy Policy</a><br/>
                    <a href="http://www.eclipse.org/legal/termsofuse.php" target="_blank">Terms of Use</a><br/>
                    <a href="https://www.eclipse.org/legal/epl-2.0/" target="_blank">Eclipse Public License</a><br/>
                    <a href="http://www.eclipse.org/legal" target="_blank">Legal Resources</a><br/>
                </div>
            </div>
</footer>




    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
